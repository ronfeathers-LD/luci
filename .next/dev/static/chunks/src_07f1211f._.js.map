{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/ron.feathers/GitHub/LUCI/src/components/shared/Header.js"],"sourcesContent":["// Global Header Component\n// Used across all pages for consistent navigation\n'use client';\n\nimport { useState, useEffect } from 'react';\nimport { useRouter, usePathname } from 'next/navigation';\nimport Link from 'next/link';\n\nconst Header = ({ user, onSignOut, showHelp, setShowHelp }) => {\n  const router = useRouter();\n  const pathname = usePathname();\n  const currentPath = pathname || '/';\n\n  // Helper function to check if user has admin role (case-insensitive)\n  const hasAdminRole = (userToCheck = user) => {\n    if (!userToCheck || !userToCheck.roles) return false;\n    return userToCheck.roles.some(role => role.name && role.name.toLowerCase() === 'admin');\n  };\n\n  // Check if a tab is active\n  const isActive = (path) => {\n    if (path === '/') {\n      return currentPath === '/' || currentPath === '';\n    }\n    return currentPath.startsWith(path);\n  };\n\n  // Get build version for cache busting\n  const getBuildVersion = () => {\n    if (typeof window !== 'undefined' && window.getBuildVersion) {\n      return window.getBuildVersion();\n    }\n    return Date.now().toString();\n  };\n\n  return (\n    <header className=\"bg-lean-black px-4 sm:px-6 lg:px-8 py-4 flex-shrink-0\">\n      <div className=\"max-w-6xl mx-auto\">\n        {/* Top row: Logo and User Info */}\n        <div className=\"flex items-center justify-between mb-4\">\n          <div className=\"flex items-center gap-4\">\n            {/* LD Logo */}\n            <img \n              src={`/ld-logo-abbr-green.png?v=${getBuildVersion()}`}\n              alt=\"LeanData Logo\" \n              className=\"h-12 w-auto flex-shrink-0\"\n              key={`logo-${getBuildVersion()}`}\n            />\n            <div className=\"text-left\">\n              <h1 className=\"typography-heading text-[#f7f7f7] mb-1\">\n                L.U.C.I.\n              </h1>\n              <p className=\"text-sm text-[#f7f7f7]\">\n                LeanData Unified Customer Intelligence\n              </p>\n            </div>\n          </div>\n          \n          {/* User Info and Actions */}\n          <div className=\"flex items-center gap-3\">\n            {setShowHelp && (\n              <button\n                onClick={() => setShowHelp(!showHelp)}\n                className=\"px-3 py-2 text-sm font-medium text-[#f7f7f7] hover:text-lean-green transition-colors flex items-center gap-2\"\n                aria-label=\"Show help and information\"\n              >\n                <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                </svg>\n                {showHelp ? 'Hide' : 'Help'}\n              </button>\n            )}\n            <div className=\"flex items-center gap-3 bg-lean-black/50 px-4 py-2 rounded-lg\">\n              <div className=\"text-right\">\n                <button\n                  onClick={() => router.push('/user')}\n                  className=\"text-sm font-medium text-[#f7f7f7] hover:text-lean-green transition-colors cursor-pointer text-right\"\n                  aria-label=\"Go to account settings\"\n                >\n                  {user?.name || 'User'}\n                </button>\n                <p className=\"text-xs text-[#f7f7f7]\">\n                  {user?.email}\n                </p>\n                {user?.role && (\n                  <p className=\"text-xs text-lean-green font-medium\">\n                    {user.role}\n                  </p>\n                )}\n              </div>\n              <div className=\"w-8 h-8 rounded-full bg-lean-green flex items-center justify-center flex-shrink-0\">\n                {user?.picture ? (\n                  <img\n                    src={user.picture}\n                    alt={user.name || 'User'}\n                    className=\"w-8 h-8 rounded-full object-cover\"\n                    onError={(e) => {\n                      // Show fallback initials if image fails\n                      e.target.style.display = 'none';\n                      const fallback = e.target.nextSibling;\n                      if (fallback) {\n                        fallback.style.display = 'flex';\n                      }\n                    }}\n                  />\n                ) : null}\n                <div \n                  className=\"w-8 h-8 rounded-full bg-lean-green flex items-center justify-center text-white text-xs font-semibold\"\n                  style={{ display: user?.picture ? 'none' : 'flex' }}\n                >\n                  {user?.name \n                    ? user.name.split(' ').map(n => n[0]).join('').toUpperCase().substring(0, 2)\n                    : user?.email \n                      ? user.email.substring(0, 2).toUpperCase()\n                      : 'U'\n                  }\n                </div>\n              </div>\n            </div>\n            <button\n              onClick={() => {\n                if (onSignOut) {\n                  onSignOut();\n                } else {\n                  if (typeof window !== 'undefined' && window.google?.accounts?.id) {\n                    window.google.accounts.id.disableAutoSelect();\n                  }\n                  localStorage.removeItem('userInfo');\n                  window.location.reload();\n                }\n              }}\n              className=\"px-4 py-2 text-sm font-medium text-[#f7f7f7] hover:text-lean-green transition-colors whitespace-nowrap\"\n            >\n              Sign Out\n            </button>\n          </div>\n        </div>\n\n        {/* Bottom row: Navigation Tabs */}\n        <div className=\"flex items-center justify-between gap-1 border-b border-[#f7f7f7]/20\">\n          <div className=\"flex items-center gap-1\">\n            <button\n              onClick={() => router.push('/')}\n              className={`px-4 py-2 text-sm font-medium transition-colors border-b-2 ${\n                isActive('/') && currentPath !== '/user' && currentPath !== '/calendar' && currentPath !== '/analyze' && !currentPath.startsWith('/admin') && !currentPath.startsWith('/account') && !currentPath.startsWith('/sentiment')\n                  ? 'text-lean-green border-lean-green'\n                  : 'text-[#f7f7f7]/70 border-transparent hover:text-[#f7f7f7] hover:border-[#f7f7f7]/30'\n              }`}\n              aria-label=\"Go to dashboard\"\n            >\n              Dashboard\n            </button>\n            <button\n              onClick={() => router.push('/analyze')}\n              className={`px-4 py-2 text-sm font-medium transition-colors border-b-2 ${\n                isActive('/analyze')\n                  ? 'text-lean-green border-lean-green'\n                  : 'text-[#f7f7f7]/70 border-transparent hover:text-[#f7f7f7] hover:border-[#f7f7f7]/30'\n              }`}\n              aria-label=\"Run sentiment analysis\"\n            >\n              Analyze\n            </button>\n            <button\n              onClick={() => router.push('/user')}\n              className={`px-4 py-2 text-sm font-medium transition-colors border-b-2 ${\n                isActive('/user')\n                  ? 'text-lean-green border-lean-green'\n                  : 'text-[#f7f7f7]/70 border-transparent hover:text-[#f7f7f7] hover:border-[#f7f7f7]/30'\n              }`}\n              aria-label=\"Manage my accounts\"\n            >\n              My Accounts\n            </button>\n            <button\n              onClick={() => router.push('/calendar')}\n              className={`px-4 py-2 text-sm font-medium transition-colors border-b-2 ${\n                isActive('/calendar')\n                  ? 'text-lean-green border-lean-green'\n                  : 'text-[#f7f7f7]/70 border-transparent hover:text-[#f7f7f7] hover:border-[#f7f7f7]/30'\n              }`}\n              aria-label=\"View calendar\"\n            >\n              Calendar\n            </button>\n          </div>\n          {hasAdminRole(user) && (\n            <button\n              onClick={() => router.push('/admin')}\n              className={`px-4 py-2 text-sm font-medium transition-colors border-b-2 ${\n                isActive('/admin')\n                  ? 'text-blue-400 border-blue-400'\n                  : 'text-[#f7f7f7]/70 border-transparent hover:text-[#f7f7f7] hover:border-[#f7f7f7]/30'\n              }`}\n              aria-label=\"Go to admin panel\"\n            >\n              Admin\n            </button>\n          )}\n        </div>\n      </div>\n    </header>\n  );\n};\n\nexport default Header;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 339, "column": 0}, "map": {"version":3,"sources":["file:///Users/ron.feathers/GitHub/LUCI/src/lib/client-utils.js"],"sourcesContent":["/**\n * Client Utilities for Next.js\n * \n * Provides client-side utilities that replace window.* globals\n * Can be imported in components\n */\n\n/**\n * Request deduplication map (in-memory, shared across components)\n */\nconst pendingRequests = new Map();\n\n/**\n * Generate a cache key from request parameters\n */\nfunction getRequestKey(url, options = {}) {\n  const method = options.method || 'GET';\n  const body = options.body ? (typeof options.body === 'string' ? options.body : JSON.stringify(options.body)) : '';\n  return `${method}:${url}:${body}`;\n}\n\n/**\n * Deduplicated fetch wrapper\n * Prevents duplicate simultaneous requests by caching in-flight requests\n */\nexport function deduplicatedFetch(url, options = {}) {\n  // Use existing window implementation if available (for backwards compatibility)\n  if (typeof window !== 'undefined' && window.deduplicatedFetch && window.deduplicatedFetch !== deduplicatedFetch) {\n    return window.deduplicatedFetch(url, options);\n  }\n  \n  const key = getRequestKey(url, options);\n  \n  // If request is already in progress, return the existing promise\n  if (pendingRequests.has(key)) {\n    return pendingRequests.get(key);\n  }\n  \n  // Create new request\n  const requestPromise = fetch(url, options)\n    .then(response => {\n      // Remove from pending after a short delay to allow for rapid re-requests\n      setTimeout(() => {\n        pendingRequests.delete(key);\n      }, 100);\n      return response;\n    })\n    .catch(error => {\n      // Remove from pending on error\n      pendingRequests.delete(key);\n      throw error;\n    });\n  \n  pendingRequests.set(key, requestPromise);\n  return requestPromise;\n}\n\n/**\n * Logging utilities\n */\nexport function logError(message, error, ...args) {\n  if (typeof window !== 'undefined' && window.logError) {\n    return window.logError(message, error, ...args);\n  }\n  console.error(message, error, ...args);\n}\n\nexport function log(message, ...args) {\n  if (typeof window !== 'undefined' && window.log) {\n    return window.log(message, ...args);\n  }\n  console.log(message, ...args);\n}\n\nexport function logWarn(message, ...args) {\n  if (typeof window !== 'undefined' && window.logWarn) {\n    return window.logWarn(message, ...args);\n  }\n  console.warn(message, ...args);\n}\n\n/**\n * Analytics utilities\n */\nexport function trackAnalytics(event, data) {\n  if (typeof window !== 'undefined' && window.analytics) {\n    return window.analytics.track(event, data);\n  }\n  if (process.env.NODE_ENV !== 'production') {\n    console.log('[Analytics] Track:', event, data);\n  }\n}\n\nexport function pageView(page) {\n  if (typeof window !== 'undefined' && window.analytics) {\n    return window.analytics.pageView(page);\n  }\n  if (process.env.NODE_ENV !== 'production') {\n    console.log('[Analytics] Page View:', page);\n  }\n}\n\n/**\n * Supabase client (if needed on client)\n */\nexport function getSupabaseClient() {\n  if (typeof window !== 'undefined' && window.supabase) {\n    return window.supabase;\n  }\n  throw new Error('Supabase client not available. Make sure it\\'s initialized.');\n}\n\n/**\n * Contact level categorization\n */\nexport function categorizeContactLevel(title) {\n  if (!title) return 'Other';\n  \n  const titleLower = title.toLowerCase();\n  \n  // C-Level executives\n  const cLevelPatterns = [\n    /^chief/i, /^c\\s*[-.]?\\s*level/i, /^c\\s*[-.]?\\s*suite/i,\n    /president/i, /^ceo/i, /^cto/i, /^cfo/i, /^coo/i, /^cmo/i, /^chro/i,\n    /^chief\\s+executive/i, /^chief\\s+technology/i, /^chief\\s+financial/i,\n    /^chief\\s+operating/i, /^chief\\s+marketing/i, /^chief\\s+human/i\n  ];\n  \n  // Senior Level (VP, SVP, Director, etc.)\n  const srLevelPatterns = [\n    /^vice\\s+president/i, /^vp/i, /^svp/i, /^evp/i,\n    /^senior\\s+vice\\s+president/i, /^executive\\s+vice\\s+president/i,\n    /^director/i, /^senior\\s+director/i, /^executive\\s+director/i,\n    /^head\\s+of/i, /^general\\s+manager/i, /^gm\\b/i\n  ];\n  \n  // Check C-Level first\n  if (cLevelPatterns.some(pattern => pattern.test(titleLower))) {\n    return 'C-Level';\n  }\n  \n  // Check Senior Level\n  if (srLevelPatterns.some(pattern => pattern.test(titleLower))) {\n    return 'Sr. Level';\n  }\n  \n  return 'Other';\n}\n\n/**\n * Format currency value\n */\nexport function formatCurrency(value) {\n  if (!value || value === 'N/A' || value === null || value === undefined) {\n    return 'N/A';\n  }\n  \n  // If it's already a formatted string with $, return as is\n  if (typeof value === 'string' && value.includes('$')) {\n    return value;\n  }\n  \n  // Convert to number if it's a string\n  const numValue = typeof value === 'string' ? parseFloat(value.replace(/[^0-9.-]/g, '')) : value;\n  \n  // Check if it's a valid number\n  if (isNaN(numValue)) {\n    return value; // Return original if not a number\n  }\n  \n  // Format as US currency\n  return new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: 'USD',\n    minimumFractionDigits: 0,\n    maximumFractionDigits: 0,\n  }).format(numValue);\n}\n\n/**\n * Get build version for cache busting\n */\nexport function getBuildVersion() {\n  if (typeof window === 'undefined') return 'unknown';\n  const htmlTag = document.documentElement;\n  return htmlTag.getAttribute('data-build-version') || \n         document.querySelector('meta[name=\"build-version\"]')?.content || \n         'unknown';\n}\n\n/**\n * Check if in production environment\n */\nexport function isProduction() {\n  if (typeof window === 'undefined') return false;\n  return window.location.hostname !== 'localhost' && !window.location.hostname.includes('127.0.0.1');\n}\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 531, "column": 0}, "map": {"version":3,"sources":["file:///Users/ron.feathers/GitHub/LUCI/src/components/Dashboard.js"],"sourcesContent":["// Dashboard Component\n// Shows overview of accounts, recent analyses, and upcoming meetings\n'use client';\n\nimport { useState, useEffect, useCallback, useRef } from 'react';\nimport { useRouter } from 'next/navigation';\nimport Header from './shared/Header';\nimport { deduplicatedFetch, logError } from '../lib/client-utils';\n\n// Loader Icon Component\nconst LoaderIcon = ({ className }) => (\n  <svg className={className} fill=\"none\" viewBox=\"0 0 24 24\">\n    <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n    <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n  </svg>\n);\n\nconst Dashboard = ({ user, onSignOut }) => {\n  const router = useRouter();\n  const [accounts, setAccounts] = useState([]);\n  const [recentAnalyses, setRecentAnalyses] = useState([]);\n  const [upcomingMeetings, setUpcomingMeetings] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [calendarConnected, setCalendarConnected] = useState(false);\n  \n  // Refs to prevent duplicate API calls during React Strict Mode double-renders\n  const accountsFetchingRef = useRef(false);\n  const accountsFetchedRef = useRef(false);\n\n  // Fetch user's accounts\n  const fetchAccounts = useCallback(async () => {\n    if (!user?.id && !user?.email) return;\n    \n    // Prevent duplicate calls\n    if (accountsFetchingRef.current) {\n      return;\n    }\n    \n    accountsFetchingRef.current = true;\n\n    try {\n      const params = new URLSearchParams({\n        userId: user.id || '',\n        email: user.email || '',\n        role: user.role || '',\n        cacheOnly: 'true',\n      });\n\n      const response = await deduplicatedFetch(`/api/salesforce-accounts?${params}`);\n      const responseClone = response.clone();\n      \n      if (response.ok) {\n        const data = await responseClone.json();\n        setAccounts(data.accounts || []);\n        accountsFetchedRef.current = true;\n      }\n    } catch (err) {\n      logError('Error fetching accounts:', err);\n    } finally {\n      // Reset fetching flag after a short delay to allow for legitimate re-fetches\n      setTimeout(() => {\n        accountsFetchingRef.current = false;\n      }, 1000);\n    }\n  }, [user]);\n\n  // Fetch recent sentiment analyses for user's accounts\n  const fetchRecentAnalyses = useCallback(async () => {\n    if (!accounts.length) return;\n\n    try {\n      // Fetch analyses for each account (limit to most recent 3 per account)\n      const analysisPromises = accounts.slice(0, 10).map(async (account) => {\n        const accountId = account.salesforceId || account.id;\n        const params = new URLSearchParams({\n          accountId: account.id,\n          salesforceAccountId: accountId,\n          limit: '3',\n          days: '30',\n        });\n\n        const response = await deduplicatedFetch(`/api/sentiment-analysis?${params}`);\n        const responseClone = response.clone();\n        \n        if (response.ok) {\n          const data = await responseClone.json();\n          return (data.history || []).map(analysis => ({\n            ...analysis,\n            accountName: account.name,\n            accountId: account.salesforceId || account.id,\n          }));\n        }\n        return [];\n      });\n\n      const allAnalyses = await Promise.all(analysisPromises);\n      const flattened = allAnalyses.flat().sort((a, b) => \n        new Date(b.analyzed_at) - new Date(a.analyzed_at)\n      );\n      setRecentAnalyses(flattened.slice(0, 10)); // Top 10 most recent\n    } catch (err) {\n      logError('Error fetching recent analyses:', err);\n    }\n  }, [accounts]);\n\n  // Check calendar connection status\n  const checkCalendarStatus = useCallback(async () => {\n    if (!user?.id) return;\n\n    try {\n      const response = await deduplicatedFetch(`/api/google-calendar?userId=${user.id}&action=status`);\n      const responseClone = response.clone();\n      \n      if (response.ok) {\n        const data = await responseClone.json();\n        setCalendarConnected(data.connected === true);\n        \n        // If connected, fetch upcoming meetings\n        if (data.connected) {\n          const meetingsResponse = await deduplicatedFetch(`/api/google-calendar?userId=${user.id}&action=events&days=7`);\n          const meetingsResponseClone = meetingsResponse.clone();\n          \n          if (meetingsResponse.ok) {\n            const meetingsData = await meetingsResponseClone.json();\n            const events = meetingsData.events || [];\n            // Filter to only show meetings with matched accounts\n            const matchedEvents = events.filter(({ matchedAccounts }) => \n              matchedAccounts && matchedAccounts.length > 0\n            );\n            setUpcomingMeetings(matchedEvents.slice(0, 5)); // Top 5 upcoming\n          }\n        }\n      }\n    } catch (err) {\n      logError('Error checking calendar status:', err);\n    }\n  }, [user]);\n\n  // Load all data - only fetch accounts once on mount or when user changes\n  useEffect(() => {\n    // Skip if already fetched or currently fetching\n    if (accountsFetchedRef.current || accountsFetchingRef.current) {\n      return;\n    }\n    \n    const loadData = async () => {\n      setLoading(true);\n      setError(null);\n      \n      try {\n        await fetchAccounts();\n      } catch (err) {\n        setError(err.message || 'Failed to load dashboard data');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    loadData();\n    \n    // Reset fetched flag when user changes\n    return () => {\n      accountsFetchedRef.current = false;\n    };\n  }, [user?.id, user?.email, fetchAccounts]);\n\n  // Fetch analyses and calendar when accounts are loaded\n  useEffect(() => {\n    if (accounts.length > 0) {\n      fetchRecentAnalyses();\n    }\n  }, [accounts, fetchRecentAnalyses]);\n\n  useEffect(() => {\n    checkCalendarStatus();\n  }, [checkCalendarStatus]);\n\n  // Format date helper\n  const formatDate = (dateString) => {\n    if (!dateString) return 'Unknown';\n    try {\n      const date = new Date(dateString);\n      const now = new Date();\n      const diffMs = now - date;\n      const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));\n      \n      if (diffDays === 0) return 'Today';\n      if (diffDays === 1) return 'Yesterday';\n      if (diffDays < 7) return `${diffDays} days ago`;\n      return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });\n    } catch {\n      return 'Invalid date';\n    }\n  };\n\n  // Format meeting date\n  const formatMeetingDate = (dateString) => {\n    if (!dateString) return '';\n    try {\n      const date = new Date(dateString);\n      return date.toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: 'numeric' });\n    } catch {\n      return '';\n    }\n  };\n\n  // Get sentiment score color\n  const getScoreColor = (score) => {\n    if (score >= 8) return 'text-green-600';\n    if (score >= 6) return 'text-yellow-600';\n    return 'text-red-600';\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-lean-almost-white flex items-center justify-center\">\n        <div className=\"text-center\">\n          <LoaderIcon className=\"w-8 h-8 animate-spin text-lean-green mx-auto mb-4\" />\n          <p className=\"text-lean-black-70\">Loading dashboard...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-lean-almost-white flex flex-col\">\n      <Header user={user} onSignOut={onSignOut} />\n\n      <main className=\"flex-1 px-4 sm:px-6 lg:px-8 py-8\">\n        <div className=\"max-w-7xl mx-auto\">\n          {/* Page Header */}\n          <div className=\"mb-8\">\n            <h1 className=\"typography-heading text-lean-black mb-2\">Dashboard</h1>\n            <p className=\"text-lean-black-70\">Overview of your accounts, analyses, and upcoming meetings</p>\n          </div>\n\n          {error && (\n            <div className=\"bg-red-50 border border-red-200 rounded-lg p-4 mb-6\">\n              <p className=\"text-sm text-red-700\">{error}</p>\n            </div>\n          )}\n\n          {/* Stats Cards */}\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8\">\n            {/* Accounts Card */}\n            <div className=\"bg-lean-white rounded-lg shadow-lg p-6\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <p className=\"text-sm text-lean-black-70 mb-1\">My Accounts</p>\n                  <p className=\"text-3xl font-bold text-lean-black\">{accounts.length}</p>\n                </div>\n                <div className=\"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center\">\n                  <svg className=\"w-6 h-6 text-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4\" />\n                  </svg>\n                </div>\n              </div>\n              <button\n                onClick={() => router.push('/user')}\n                className=\"mt-4 w-full px-4 py-3 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 transition-colors text-left\"\n              >\n                <div className=\"flex items-center gap-3\">\n                  <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4\" />\n                  </svg>\n                  <div>\n                    <div className=\"font-semibold\">Manage Accounts</div>\n                    <div className=\"text-sm opacity-90\">View and manage your accounts</div>\n                  </div>\n                </div>\n              </button>\n            </div>\n\n            {/* Analyses Card */}\n            <div className=\"bg-lean-white rounded-lg shadow-lg p-6\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <p className=\"text-sm text-lean-black-70 mb-1\">Recent Analyses</p>\n                  <p className=\"text-3xl font-bold text-lean-black\">{recentAnalyses.length}</p>\n                  <p className=\"text-xs text-lean-black-60 mt-1\">Last 30 days</p>\n                </div>\n                <div className=\"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center\">\n                  <svg className=\"w-6 h-6 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\n                  </svg>\n                </div>\n              </div>\n              <button\n                onClick={() => router.push('/analyze')}\n                className=\"mt-4 w-full px-4 py-3 bg-lean-green text-white font-semibold rounded-lg hover:bg-lean-green/90 transition-colors text-left\"\n              >\n                <div className=\"flex items-center gap-3\">\n                  <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\n                  </svg>\n                  <div>\n                    <div className=\"font-semibold\">Run Sentiment Analysis</div>\n                    <div className=\"text-sm opacity-90\">Analyze account sentiment</div>\n                  </div>\n                </div>\n              </button>\n            </div>\n\n            {/* Meetings Card */}\n            <div className=\"bg-lean-white rounded-lg shadow-lg p-6\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <p className=\"text-sm text-lean-black-70 mb-1\">Upcoming Meetings</p>\n                  <p className=\"text-3xl font-bold text-lean-black\">{upcomingMeetings.length}</p>\n                  <p className=\"text-xs text-lean-black-60 mt-1\">Next 7 days</p>\n                </div>\n                <div className=\"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center\">\n                  <svg className=\"w-6 h-6 text-purple-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\" />\n                  </svg>\n                </div>\n              </div>\n              <button\n                onClick={() => router.push('/calendar')}\n                className=\"mt-4 w-full px-4 py-3 bg-purple-600 text-white font-semibold rounded-lg hover:bg-purple-700 transition-colors text-left\"\n              >\n                <div className=\"flex items-center gap-3\">\n                  <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\" />\n                  </svg>\n                  <div>\n                    <div className=\"font-semibold\">View Calendar</div>\n                    <div className=\"text-sm opacity-90\">See upcoming meetings</div>\n                  </div>\n                </div>\n              </button>\n            </div>\n          </div>\n\n          {/* Main Content Grid */}\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n            {/* Recent Analyses */}\n            <div className=\"bg-lean-white rounded-lg shadow-lg p-6\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <h2 className=\"text-xl font-semibold text-lean-black\">Recent Sentiment Analyses</h2>\n                <button\n                  onClick={() => router.push('/analyze')}\n                  className=\"text-sm text-blue-600 hover:text-blue-800 hover:underline\"\n                >\n                  View All →\n                </button>\n              </div>\n              \n              {recentAnalyses.length === 0 ? (\n                <div className=\"text-center py-8\">\n                  <p className=\"text-lean-black-70 mb-4\">No analyses yet</p>\n                  <button\n                    onClick={() => router.push('/analyze')}\n                    className=\"px-4 py-2 bg-lean-green text-white font-semibold rounded-lg hover:bg-lean-green/90 transition-colors\"\n                  >\n                    Run Your First Analysis\n                  </button>\n                </div>\n              ) : (\n                <div className=\"space-y-4\">\n                  {recentAnalyses.map((analysis) => (\n                    <div\n                      key={analysis.id}\n                      className=\"border border-lean-black/20 rounded-lg p-4 hover:bg-lean-almost-white transition-colors cursor-pointer\"\n                      onClick={() => router.push(`/sentiment/${analysis.id}`)}\n                    >\n                      <div className=\"flex items-start justify-between\">\n                        <div className=\"flex-1\">\n                          <div className=\"flex items-center gap-2 mb-1\">\n                            <button\n                              onClick={(e) => {\n                                e.stopPropagation();\n                                const accountId = analysis.accountId || analysis.account_id;\n                                if (accountId) {\n                                  router.push(`/account/${accountId}/data`);\n                                }\n                              }}\n                              className=\"font-semibold text-blue-600 hover:text-blue-800 hover:underline\"\n                            >\n                              {analysis.accountName || 'Unknown Account'}\n                            </button>\n                          </div>\n                          <p className=\"text-sm text-lean-black-70 line-clamp-2 mb-2\">\n                            {analysis.summary || 'No summary available'}\n                          </p>\n                          <p className=\"text-xs text-lean-black-60\">{formatDate(analysis.analyzed_at)}</p>\n                        </div>\n                        <div className=\"ml-4 text-right\">\n                          <div className={`text-2xl font-bold ${getScoreColor(analysis.score)}`}>\n                            {analysis.score}/10\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n\n            {/* Upcoming Meetings */}\n            <div className=\"bg-lean-white rounded-lg shadow-lg p-6\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <h2 className=\"text-xl font-semibold text-lean-black\">Upcoming Meetings</h2>\n                <button\n                  onClick={() => router.push('/calendar')}\n                  className=\"text-sm text-blue-600 hover:text-blue-800 hover:underline\"\n                >\n                  View All →\n                </button>\n              </div>\n              \n              {!calendarConnected ? (\n                <div className=\"text-center py-8\">\n                  <p className=\"text-lean-black-70 mb-4\">Connect your Google Calendar to see upcoming meetings</p>\n                  <button\n                    onClick={() => router.push('/calendar')}\n                    className=\"px-4 py-2 bg-lean-green text-white font-semibold rounded-lg hover:bg-lean-green/90 transition-colors\"\n                  >\n                    Connect Calendar\n                  </button>\n                </div>\n              ) : upcomingMeetings.length === 0 ? (\n                <div className=\"text-center py-8\">\n                  <p className=\"text-lean-black-70\">No meetings with matched accounts in the next 7 days</p>\n                </div>\n              ) : (\n                <div className=\"space-y-4\">\n                  {upcomingMeetings.map(({ event, matchedAccounts }, idx) => (\n                    <div\n                      key={event.id || idx}\n                      className=\"border border-lean-black/20 rounded-lg p-4 hover:bg-lean-almost-white transition-colors\"\n                    >\n                      <div className=\"flex items-start justify-between\">\n                        <div className=\"flex-1\">\n                          <h3 className=\"font-semibold text-lean-black mb-1\">{event.summary || 'Untitled Meeting'}</h3>\n                          <p className=\"text-sm text-lean-black-70 mb-2\">\n                            {formatMeetingDate(event.start?.dateTime || event.start?.date)}\n                            {event.start?.dateTime && (\n                              <span className=\"ml-2\">\n                                {new Date(event.start.dateTime).toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit' })}\n                              </span>\n                            )}\n                          </p>\n                          {matchedAccounts && matchedAccounts.length > 0 && (\n                            <div className=\"flex flex-wrap gap-2\">\n                              {matchedAccounts.map((account, accIdx) => (\n                                <button\n                                  key={accIdx}\n                                  onClick={() => {\n                                    const accountId = account.salesforce_id || account.id;\n                                    if (accountId) {\n                                      router.push(`/account/${accountId}/data`);\n                                    }\n                                  }}\n                                  className=\"text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded hover:bg-blue-200 transition-colors\"\n                                >\n                                  {account.name}\n                                </button>\n                              ))}\n                            </div>\n                          )}\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </main>\n    </div>\n  );\n};\n\nexport default Dashboard;\n\n"],"names":[],"mappings":"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"}}]
}