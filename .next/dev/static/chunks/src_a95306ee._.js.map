{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/ron.feathers/GitHub/LUCI/src/components/shared/Header.js"],"sourcesContent":["// Global Header Component\n// Used across all pages for consistent navigation\n'use client';\n\nimport { useState, useEffect } from 'react';\nimport { useRouter, usePathname } from 'next/navigation';\nimport Link from 'next/link';\n\nconst Header = ({ user, onSignOut, showHelp, setShowHelp }) => {\n  const router = useRouter();\n  const pathname = usePathname();\n  const currentPath = pathname || '/';\n\n  // Helper function to check if user has admin role (case-insensitive)\n  const hasAdminRole = (userToCheck = user) => {\n    if (!userToCheck || !userToCheck.roles) return false;\n    return userToCheck.roles.some(role => role.name && role.name.toLowerCase() === 'admin');\n  };\n\n  // Check if a tab is active\n  const isActive = (path) => {\n    if (path === '/') {\n      return currentPath === '/' || currentPath === '';\n    }\n    return currentPath.startsWith(path);\n  };\n\n  // Get build version for cache busting\n  const getBuildVersion = () => {\n    if (typeof window !== 'undefined' && window.getBuildVersion) {\n      return window.getBuildVersion();\n    }\n    return Date.now().toString();\n  };\n\n  return (\n    <header className=\"bg-lean-black px-4 sm:px-6 lg:px-8 py-4 flex-shrink-0\">\n      <div className=\"max-w-6xl mx-auto\">\n        {/* Top row: Logo and User Info */}\n        <div className=\"flex items-center justify-between mb-4\">\n          <div className=\"flex items-center gap-4\">\n            {/* LD Logo */}\n            <img \n              src={`/ld-logo-abbr-green.png?v=${getBuildVersion()}`}\n              alt=\"LeanData Logo\" \n              className=\"h-12 w-auto flex-shrink-0\"\n              key={`logo-${getBuildVersion()}`}\n            />\n            <div className=\"text-left\">\n              <h1 className=\"typography-heading text-[#f7f7f7] mb-1\">\n                L.U.C.I.\n              </h1>\n              <p className=\"text-sm text-[#f7f7f7]\">\n                LeanData Unified Customer Intelligence\n              </p>\n            </div>\n          </div>\n          \n          {/* User Info and Actions */}\n          <div className=\"flex items-center gap-3\">\n            {setShowHelp && (\n              <button\n                onClick={() => setShowHelp(!showHelp)}\n                className=\"px-3 py-2 text-sm font-medium text-[#f7f7f7] hover:text-lean-green transition-colors flex items-center gap-2\"\n                aria-label=\"Show help and information\"\n              >\n                <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                </svg>\n                {showHelp ? 'Hide' : 'Help'}\n              </button>\n            )}\n            <div className=\"flex items-center gap-3 bg-lean-black/50 px-4 py-2 rounded-lg\">\n              <div className=\"text-right\">\n                <button\n                  onClick={() => router.push('/user')}\n                  className=\"text-sm font-medium text-[#f7f7f7] hover:text-lean-green transition-colors cursor-pointer text-right\"\n                  aria-label=\"Go to account settings\"\n                >\n                  {user?.name || 'User'}\n                </button>\n                <p className=\"text-xs text-[#f7f7f7]\">\n                  {user?.email}\n                </p>\n                {user?.role && (\n                  <p className=\"text-xs text-lean-green font-medium\">\n                    {user.role}\n                  </p>\n                )}\n              </div>\n              <div className=\"w-8 h-8 rounded-full bg-lean-green flex items-center justify-center flex-shrink-0\">\n                {user?.picture ? (\n                  <img\n                    src={user.picture}\n                    alt={user.name || 'User'}\n                    className=\"w-8 h-8 rounded-full object-cover\"\n                    onError={(e) => {\n                      // Show fallback initials if image fails\n                      e.target.style.display = 'none';\n                      const fallback = e.target.nextSibling;\n                      if (fallback) {\n                        fallback.style.display = 'flex';\n                      }\n                    }}\n                  />\n                ) : null}\n                <div \n                  className=\"w-8 h-8 rounded-full bg-lean-green flex items-center justify-center text-white text-xs font-semibold\"\n                  style={{ display: user?.picture ? 'none' : 'flex' }}\n                >\n                  {user?.name \n                    ? user.name.split(' ').map(n => n[0]).join('').toUpperCase().substring(0, 2)\n                    : user?.email \n                      ? user.email.substring(0, 2).toUpperCase()\n                      : 'U'\n                  }\n                </div>\n              </div>\n            </div>\n            <button\n              onClick={() => {\n                if (onSignOut) {\n                  onSignOut();\n                } else {\n                  if (typeof window !== 'undefined' && window.google?.accounts?.id) {\n                    window.google.accounts.id.disableAutoSelect();\n                  }\n                  localStorage.removeItem('userInfo');\n                  window.location.reload();\n                }\n              }}\n              className=\"px-4 py-2 text-sm font-medium text-[#f7f7f7] hover:text-lean-green transition-colors whitespace-nowrap\"\n            >\n              Sign Out\n            </button>\n          </div>\n        </div>\n\n        {/* Bottom row: Navigation Tabs */}\n        <div className=\"flex items-center justify-between gap-1 border-b border-[#f7f7f7]/20\">\n          <div className=\"flex items-center gap-1\">\n            <button\n              onClick={() => router.push('/')}\n              className={`px-4 py-2 text-sm font-medium transition-colors border-b-2 ${\n                isActive('/') && currentPath !== '/user' && currentPath !== '/calendar' && currentPath !== '/analyze' && !currentPath.startsWith('/admin') && !currentPath.startsWith('/account') && !currentPath.startsWith('/sentiment')\n                  ? 'text-lean-green border-lean-green'\n                  : 'text-[#f7f7f7]/70 border-transparent hover:text-[#f7f7f7] hover:border-[#f7f7f7]/30'\n              }`}\n              aria-label=\"Go to dashboard\"\n            >\n              Dashboard\n            </button>\n            <button\n              onClick={() => router.push('/analyze')}\n              className={`px-4 py-2 text-sm font-medium transition-colors border-b-2 ${\n                isActive('/analyze')\n                  ? 'text-lean-green border-lean-green'\n                  : 'text-[#f7f7f7]/70 border-transparent hover:text-[#f7f7f7] hover:border-[#f7f7f7]/30'\n              }`}\n              aria-label=\"Run sentiment analysis\"\n            >\n              Analyze\n            </button>\n            <button\n              onClick={() => router.push('/user')}\n              className={`px-4 py-2 text-sm font-medium transition-colors border-b-2 ${\n                isActive('/user')\n                  ? 'text-lean-green border-lean-green'\n                  : 'text-[#f7f7f7]/70 border-transparent hover:text-[#f7f7f7] hover:border-[#f7f7f7]/30'\n              }`}\n              aria-label=\"Manage my accounts\"\n            >\n              My Accounts\n            </button>\n            <button\n              onClick={() => router.push('/calendar')}\n              className={`px-4 py-2 text-sm font-medium transition-colors border-b-2 ${\n                isActive('/calendar')\n                  ? 'text-lean-green border-lean-green'\n                  : 'text-[#f7f7f7]/70 border-transparent hover:text-[#f7f7f7] hover:border-[#f7f7f7]/30'\n              }`}\n              aria-label=\"View calendar\"\n            >\n              Calendar\n            </button>\n          </div>\n          {hasAdminRole(user) && (\n            <button\n              onClick={() => router.push('/admin')}\n              className={`px-4 py-2 text-sm font-medium transition-colors border-b-2 ${\n                isActive('/admin')\n                  ? 'text-blue-400 border-blue-400'\n                  : 'text-[#f7f7f7]/70 border-transparent hover:text-[#f7f7f7] hover:border-[#f7f7f7]/30'\n              }`}\n              aria-label=\"Go to admin panel\"\n            >\n              Admin\n            </button>\n          )}\n        </div>\n      </div>\n    </header>\n  );\n};\n\nexport default Header;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 339, "column": 0}, "map": {"version":3,"sources":["file:///Users/ron.feathers/GitHub/LUCI/src/components/shared/Icons.js"],"sourcesContent":["// Shared Icon Components\n'use client';\n\nexport const TrendingUpIcon = ({ className }) => (\n  <svg className={className} xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n    <polyline points=\"22 7 13.5 15.5 8.5 10.5 2 17\"></polyline>\n    <polyline points=\"16 7 22 7 22 13\"></polyline>\n  </svg>\n);\n\nexport const TrendingDownIcon = ({ className }) => (\n  <svg className={className} xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n    <polyline points=\"22 17 13.5 8.5 8.5 13.5 2 7\"></polyline>\n    <polyline points=\"16 17 22 17 22 11\"></polyline>\n  </svg>\n);\n\nexport const LoaderIcon = ({ className }) => (\n  <svg className={className} xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n    <line x1=\"12\" y1=\"2\" x2=\"12\" y2=\"6\"></line>\n    <line x1=\"12\" y1=\"18\" x2=\"12\" y2=\"22\"></line>\n    <line x1=\"4.93\" y1=\"4.93\" x2=\"7.76\" y2=\"7.76\"></line>\n    <line x1=\"16.24\" y1=\"16.24\" x2=\"19.07\" y2=\"19.07\"></line>\n    <line x1=\"2\" y1=\"12\" x2=\"6\" y2=\"12\"></line>\n    <line x1=\"18\" y1=\"12\" x2=\"22\" y2=\"12\"></line>\n    <line x1=\"4.93\" y1=\"19.07\" x2=\"7.76\" y2=\"16.24\"></line>\n    <line x1=\"16.24\" y1=\"7.76\" x2=\"19.07\" y2=\"4.93\"></line>\n  </svg>\n);\n"],"names":[],"mappings":"AAAA,yBAAyB;;;;;;;;;;AACzB;;AAEO,MAAM,iBAAiB,CAAC,EAAE,SAAS,EAAE,iBAC1C,6LAAC;QAAI,WAAW;QAAW,OAAM;QAA6B,OAAM;QAAK,QAAO;QAAK,SAAQ;QAAY,MAAK;QAAO,QAAO;QAAe,aAAY;QAAI,eAAc;QAAQ,gBAAe;;0BAC9L,6LAAC;gBAAS,QAAO;;;;;;0BACjB,6LAAC;gBAAS,QAAO;;;;;;;;;;;;KAHR;AAON,MAAM,mBAAmB,CAAC,EAAE,SAAS,EAAE,iBAC5C,6LAAC;QAAI,WAAW;QAAW,OAAM;QAA6B,OAAM;QAAK,QAAO;QAAK,SAAQ;QAAY,MAAK;QAAO,QAAO;QAAe,aAAY;QAAI,eAAc;QAAQ,gBAAe;;0BAC9L,6LAAC;gBAAS,QAAO;;;;;;0BACjB,6LAAC;gBAAS,QAAO;;;;;;;;;;;;MAHR;AAON,MAAM,aAAa,CAAC,EAAE,SAAS,EAAE,iBACtC,6LAAC;QAAI,WAAW;QAAW,OAAM;QAA6B,OAAM;QAAK,QAAO;QAAK,SAAQ;QAAY,MAAK;QAAO,QAAO;QAAe,aAAY;QAAI,eAAc;QAAQ,gBAAe;;0BAC9L,6LAAC;gBAAK,IAAG;gBAAK,IAAG;gBAAI,IAAG;gBAAK,IAAG;;;;;;0BAChC,6LAAC;gBAAK,IAAG;gBAAK,IAAG;gBAAK,IAAG;gBAAK,IAAG;;;;;;0BACjC,6LAAC;gBAAK,IAAG;gBAAO,IAAG;gBAAO,IAAG;gBAAO,IAAG;;;;;;0BACvC,6LAAC;gBAAK,IAAG;gBAAQ,IAAG;gBAAQ,IAAG;gBAAQ,IAAG;;;;;;0BAC1C,6LAAC;gBAAK,IAAG;gBAAI,IAAG;gBAAK,IAAG;gBAAI,IAAG;;;;;;0BAC/B,6LAAC;gBAAK,IAAG;gBAAK,IAAG;gBAAK,IAAG;gBAAK,IAAG;;;;;;0BACjC,6LAAC;gBAAK,IAAG;gBAAO,IAAG;gBAAQ,IAAG;gBAAO,IAAG;;;;;;0BACxC,6LAAC;gBAAK,IAAG;gBAAQ,IAAG;gBAAO,IAAG;gBAAQ,IAAG;;;;;;;;;;;;MAThC"}},
    {"offset": {"line": 527, "column": 0}, "map": {"version":3,"sources":["file:///Users/ron.feathers/GitHub/LUCI/src/lib/client-utils.js"],"sourcesContent":["/**\n * Client Utilities for Next.js\n * \n * Provides client-side utilities that replace window.* globals\n * Can be imported in components\n */\n\n/**\n * Deduplicated fetch wrapper\n * Falls back to regular fetch if deduplication script isn't loaded\n */\nexport function deduplicatedFetch(...args) {\n  if (typeof window !== 'undefined' && window.deduplicatedFetch) {\n    return window.deduplicatedFetch(...args);\n  }\n  return fetch(...args);\n}\n\n/**\n * Logging utilities\n */\nexport function logError(message, error, ...args) {\n  if (typeof window !== 'undefined' && window.logError) {\n    return window.logError(message, error, ...args);\n  }\n  console.error(message, error, ...args);\n}\n\nexport function log(message, ...args) {\n  if (typeof window !== 'undefined' && window.log) {\n    return window.log(message, ...args);\n  }\n  console.log(message, ...args);\n}\n\nexport function logWarn(message, ...args) {\n  if (typeof window !== 'undefined' && window.logWarn) {\n    return window.logWarn(message, ...args);\n  }\n  console.warn(message, ...args);\n}\n\n/**\n * Analytics utilities\n */\nexport function trackAnalytics(event, data) {\n  if (typeof window !== 'undefined' && window.analytics) {\n    return window.analytics.track(event, data);\n  }\n  if (process.env.NODE_ENV !== 'production') {\n    console.log('[Analytics] Track:', event, data);\n  }\n}\n\nexport function pageView(page) {\n  if (typeof window !== 'undefined' && window.analytics) {\n    return window.analytics.pageView(page);\n  }\n  if (process.env.NODE_ENV !== 'production') {\n    console.log('[Analytics] Page View:', page);\n  }\n}\n\n/**\n * Supabase client (if needed on client)\n */\nexport function getSupabaseClient() {\n  if (typeof window !== 'undefined' && window.supabase) {\n    return window.supabase;\n  }\n  throw new Error('Supabase client not available. Make sure it\\'s initialized.');\n}\n\n/**\n * Contact level categorization\n */\nexport function categorizeContactLevel(title) {\n  if (!title) return 'Other';\n  \n  const titleLower = title.toLowerCase();\n  \n  // C-Level executives\n  const cLevelPatterns = [\n    /^chief/i, /^c\\s*[-.]?\\s*level/i, /^c\\s*[-.]?\\s*suite/i,\n    /president/i, /^ceo/i, /^cto/i, /^cfo/i, /^coo/i, /^cmo/i, /^chro/i,\n    /^chief\\s+executive/i, /^chief\\s+technology/i, /^chief\\s+financial/i,\n    /^chief\\s+operating/i, /^chief\\s+marketing/i, /^chief\\s+human/i\n  ];\n  \n  // Senior Level (VP, SVP, Director, etc.)\n  const srLevelPatterns = [\n    /^vice\\s+president/i, /^vp/i, /^svp/i, /^evp/i,\n    /^senior\\s+vice\\s+president/i, /^executive\\s+vice\\s+president/i,\n    /^director/i, /^senior\\s+director/i, /^executive\\s+director/i,\n    /^head\\s+of/i, /^general\\s+manager/i, /^gm\\b/i\n  ];\n  \n  // Check C-Level first\n  if (cLevelPatterns.some(pattern => pattern.test(titleLower))) {\n    return 'C-Level';\n  }\n  \n  // Check Senior Level\n  if (srLevelPatterns.some(pattern => pattern.test(titleLower))) {\n    return 'Sr. Level';\n  }\n  \n  return 'Other';\n}\n\n/**\n * Format currency value\n */\nexport function formatCurrency(value) {\n  if (!value || value === 'N/A' || value === null || value === undefined) {\n    return 'N/A';\n  }\n  \n  // If it's already a formatted string with $, return as is\n  if (typeof value === 'string' && value.includes('$')) {\n    return value;\n  }\n  \n  // Convert to number if it's a string\n  const numValue = typeof value === 'string' ? parseFloat(value.replace(/[^0-9.-]/g, '')) : value;\n  \n  // Check if it's a valid number\n  if (isNaN(numValue)) {\n    return value; // Return original if not a number\n  }\n  \n  // Format as US currency\n  return new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: 'USD',\n    minimumFractionDigits: 0,\n    maximumFractionDigits: 0,\n  }).format(numValue);\n}\n\n/**\n * Get build version for cache busting\n */\nexport function getBuildVersion() {\n  if (typeof window === 'undefined') return 'unknown';\n  const htmlTag = document.documentElement;\n  return htmlTag.getAttribute('data-build-version') || \n         document.querySelector('meta[name=\"build-version\"]')?.content || \n         'unknown';\n}\n\n/**\n * Check if in production environment\n */\nexport function isProduction() {\n  if (typeof window === 'undefined') return false;\n  return window.location.hostname !== 'localhost' && !window.location.hostname.includes('127.0.0.1');\n}\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 693, "column": 0}, "map": {"version":3,"sources":["file:///Users/ron.feathers/GitHub/LUCI/src/components/calendar/CalendarPage.js"],"sourcesContent":["// Calendar Page Component\n// Displays upcoming meetings with external contacts and research summary\n'use client';\n\nimport { useState, useEffect, useCallback } from 'react';\nimport { useRouter } from 'next/navigation';\nimport Header from '../shared/Header';\nimport { LoaderIcon } from '../shared/Icons';\nimport { deduplicatedFetch, logError } from '../../lib/client-utils';\n\nconst CalendarPage = ({ user, onSignOut }) => {\n  const router = useRouter();\n  const [calendarConnected, setCalendarConnected] = useState(false);\n  const [checkingCalendar, setCheckingCalendar] = useState(true);\n  const [calendarConfigured, setCalendarConfigured] = useState(true);\n  const [upcomingMeetings, setUpcomingMeetings] = useState([]);\n  const [loadingMeetings, setLoadingMeetings] = useState(false);\n  const [researchSummary, setResearchSummary] = useState(null);\n  const [error, setError] = useState(null);\n\n  // Check Google Calendar connection status\n  const checkCalendarConnection = useCallback(async () => {\n    if (!user?.id) {\n      setCheckingCalendar(false);\n      return;\n    }\n\n    try {\n      const response = await deduplicatedFetch(`/api/google-calendar?action=status&userId=${user.id}`);\n      const responseClone = response.clone();\n      if (response.ok) {\n        const data = await responseClone.json();\n        setCalendarConnected(data.connected || false);\n        setCalendarConfigured(data.configured !== false);\n      } else {\n        setCalendarConnected(false);\n        setCalendarConfigured(true);\n      }\n    } catch (err) {\n      logError('Error checking calendar connection:', err);\n      setCalendarConnected(false);\n      setCalendarConfigured(true);\n    } finally {\n      setCheckingCalendar(false);\n    }\n  }, [user]);\n\n  // Handle Google Calendar authorization\n  const handleConnectCalendar = useCallback(() => {\n    if (!user?.id) {\n      setError('User ID is required to connect Google Calendar');\n      return;\n    }\n\n    // Redirect to Google Calendar OAuth endpoint\n    if (typeof window !== 'undefined') {\n      window.location.href = `/api/google-calendar?userId=${user.id}`;\n    }\n  }, [user]);\n\n  // Handle Google Calendar disconnection\n  const handleDisconnectCalendar = useCallback(async () => {\n    if (!user?.id) {\n      setError('User ID is required to disconnect Google Calendar');\n      return;\n    }\n\n    if (!confirm('Are you sure you want to disconnect Google Calendar? You will need to reconnect to sync your meetings.')) {\n      return;\n    }\n\n    try {\n      // Use query param for DELETE requests (more reliable than body in some environments)\n      const response = await fetch(`/api/google-calendar?userId=${encodeURIComponent(user.id)}`, {\n        method: 'DELETE',\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}));\n        throw new Error(errorData.message || errorData.error || 'Failed to disconnect Google Calendar');\n      }\n\n      setCalendarConnected(false);\n      setUpcomingMeetings([]);\n      setResearchSummary(null);\n    } catch (err) {\n      logError('Error disconnecting calendar:', err);\n      setError(err.message || 'Failed to disconnect Google Calendar. Please try again.');\n    }\n  }, [user]);\n\n  // Fetch upcoming meetings\n  const fetchUpcomingMeetings = useCallback(async (forceRefresh = false) => {\n    if (!user?.id || !calendarConnected) {\n      return;\n    }\n\n    try {\n      setLoadingMeetings(true);\n      setError(null);\n      const url = `/api/google-calendar?userId=${user.id}&action=events&days=7${forceRefresh ? '&forceRefresh=true' : ''}`;\n      const response = await deduplicatedFetch(url);\n      const responseClone = response.clone();\n      \n      if (!response.ok) {\n        if (response.status === 401) {\n          setCalendarConnected(false);\n          return;\n        }\n        const errorData = await responseClone.json().catch(() => ({}));\n        throw new Error(errorData.message || errorData.error || 'Failed to fetch meetings');\n      }\n\n      const data = await responseClone.json();\n      const allEvents = data.events || [];\n      \n      // Filter to only show meetings with matched accounts\n      // We'll show any event that has matched accounts, regardless of how they matched\n      const userEmail = user.email?.toLowerCase();\n      const filteredEvents = allEvents.filter(({ event, matchedAccounts }) => {\n        // Must have matched accounts\n        if (!matchedAccounts || matchedAccounts.length === 0) {\n          return false;\n        }\n        \n        // If there are attendees, check if any are external (not the user)\n        if (event.attendees && Array.isArray(event.attendees)) {\n          const hasExternalAttendee = event.attendees.some(attendee => {\n            if (!attendee.email) return false;\n            const attendeeEmail = attendee.email.toLowerCase();\n            // Skip if this is the user's email\n            return !(userEmail && attendeeEmail === userEmail);\n          });\n          \n          // If there are external attendees, show the event\n          if (hasExternalAttendee) {\n            return true;\n          }\n        }\n        \n        // Also show events matched by account name even if no external attendees\n        // (in case the account name was found in title/description)\n        return true;\n      });\n      \n      setUpcomingMeetings(filteredEvents);\n      \n      // Create research summary\n      const accountMap = new Map();\n      filteredEvents.forEach(({ matchedAccounts }) => {\n        matchedAccounts.forEach(account => {\n          if (!accountMap.has(account.id)) {\n            accountMap.set(account.id, {\n              ...account,\n              meetingCount: 0,\n              meetings: [],\n            });\n          }\n          const accountData = accountMap.get(account.id);\n          accountData.meetingCount += 1;\n        });\n      });\n      \n      // Add meeting details to each account\n      filteredEvents.forEach(({ event, matchedAccounts }) => {\n        const startTime = event.start?.dateTime || event.start?.date;\n        const startDate = startTime ? new Date(startTime) : null;\n        \n        matchedAccounts.forEach(account => {\n          const accountData = accountMap.get(account.id);\n          if (accountData && startDate) {\n            accountData.meetings.push({\n              title: event.summary || 'No Title',\n              date: startDate,\n              htmlLink: event.htmlLink,\n            });\n          }\n        });\n      });\n      \n      // Convert to array and sort by meeting count (most meetings first)\n      const researchAccounts = Array.from(accountMap.values())\n        .sort((a, b) => b.meetingCount - a.meetingCount);\n      \n      setResearchSummary({\n        totalAccounts: researchAccounts.length,\n        totalMeetings: filteredEvents.length,\n        accounts: researchAccounts,\n      });\n    } catch (err) {\n      logError('Error fetching meetings:', err);\n      setError(err.message || 'Failed to fetch meetings. Please try again.');\n    } finally {\n      setLoadingMeetings(false);\n    }\n  }, [user, calendarConnected]);\n\n  // Load calendar status on mount\n  useEffect(() => {\n    checkCalendarConnection();\n  }, [checkCalendarConnection]);\n\n  // Fetch meetings when calendar is connected\n  useEffect(() => {\n    if (calendarConnected) {\n      fetchUpcomingMeetings();\n    } else {\n      setUpcomingMeetings([]);\n      setResearchSummary(null);\n    }\n  }, [calendarConnected, fetchUpcomingMeetings]);\n\n  return (\n    <div className=\"min-h-screen bg-lean-almost-white flex flex-col\">\n      {/* Global Header */}\n      <Header user={user} onSignOut={onSignOut} />\n\n      {/* Main Content */}\n      <main className=\"flex-1 px-4 sm:px-6 lg:px-8 py-8\">\n        <div className=\"max-w-6xl mx-auto\">\n          {/* Page Title */}\n          <div className=\"mb-6\">\n            <h1 className=\"typography-heading text-lean-black mb-2\">Calendar</h1>\n            <p className=\"text-sm text-lean-black-70\">Upcoming meetings with external contacts</p>\n          </div>\n\n          {error && (\n            <div className=\"bg-red-50 border border-red-200 rounded-lg p-4 mb-6\">\n              <p className=\"text-sm text-red-700\">{error}</p>\n            </div>\n          )}\n\n          {/* Google Calendar Connection Section */}\n          <div className=\"bg-lean-white rounded-lg shadow-lg p-6 mb-6\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <div>\n                <h2 className=\"typography-heading text-lean-black\">Google Calendar</h2>\n                <p className=\"text-sm text-lean-black-70 mt-1\">\n                  Connect your Google Calendar to see upcoming meetings and associated accounts\n                </p>\n              </div>\n              {checkingCalendar ? (\n                <LoaderIcon className=\"w-5 h-5 animate-spin text-lean-green\" />\n              ) : !calendarConfigured ? (\n                <span className=\"text-sm text-yellow-600 font-medium\">Not Configured</span>\n              ) : calendarConnected ? (\n                <div className=\"flex items-center gap-3\">\n                  <span className=\"text-sm text-green-600 font-medium\">Connected</span>\n                  <button\n                    onClick={handleDisconnectCalendar}\n                    className=\"px-4 py-2 bg-red-600 text-white font-semibold rounded-lg hover:bg-red-700 transition-colors\"\n                  >\n                    Disconnect\n                  </button>\n                </div>\n              ) : (\n                <button\n                  onClick={handleConnectCalendar}\n                  className=\"px-4 py-2 bg-lean-green text-lean-white font-semibold rounded-lg hover:bg-lean-green/90 transition-colors\"\n                >\n                  Connect Calendar\n                </button>\n              )}\n            </div>\n            {!calendarConfigured && (\n              <div className=\"mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg\">\n                <p className=\"text-sm text-yellow-700\">\n                  ‚ö†Ô∏è Google Calendar integration is not configured. Please contact your administrator to set up the required environment variables.\n                </p>\n              </div>\n            )}\n            {calendarConfigured && calendarConnected && (\n              <div className=\"mt-4 p-4 bg-green-50 border border-green-200 rounded-lg\">\n                <p className=\"text-sm text-green-700\">\n                  ‚úì Your Google Calendar is connected. Meetings will be synced automatically.\n                </p>\n              </div>\n            )}\n          </div>\n\n          {/* Research Summary Section */}\n          {calendarConnected && researchSummary && researchSummary.accounts.length > 0 && (\n            <div className=\"bg-gradient-to-r from-lean-green-10 to-lean-green-5 rounded-lg shadow-lg p-6 mb-6 border border-lean-green/20\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <div>\n                  <h2 className=\"typography-heading text-lean-black\">Weekly Research Summary</h2>\n                  <p className=\"text-sm text-lean-black-70 mt-1\">\n                    {researchSummary.totalAccounts} {researchSummary.totalAccounts === 1 ? 'account' : 'accounts'} to research across {researchSummary.totalMeetings} {researchSummary.totalMeetings === 1 ? 'meeting' : 'meetings'}\n                  </p>\n                </div>\n              </div>\n              \n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                {researchSummary.accounts.map((account) => (\n                  <div\n                    key={account.id}\n                    className=\"bg-lean-white rounded-lg p-4 border border-lean-black/10 hover:shadow-md transition-shadow\"\n                  >\n                    <div className=\"flex items-start justify-between mb-2\">\n                      <h3 className=\"font-semibold text-lean-black flex-1\">{account.name}</h3>\n                      <span className=\"ml-2 px-2 py-1 bg-lean-green-10 text-lean-green text-xs font-semibold rounded-full\">\n                        {account.meetingCount} {account.meetingCount === 1 ? 'meeting' : 'meetings'}\n                      </span>\n                    </div>\n                    <div className=\"text-xs text-lean-black-60 space-y-1\">\n                      {account.meetings.slice(0, 3).map((meeting, idx) => (\n                        <div key={idx} className=\"flex items-center gap-2\">\n                          <span className=\"font-medium\">\n                            {meeting.date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' })}\n                          </span>\n                          <span className=\"truncate\">{meeting.title}</span>\n                        </div>\n                      ))}\n                      {account.meetings.length > 3 && (\n                        <div className=\"text-lean-black-60 italic\">\n                          +{account.meetings.length - 3} more\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* Upcoming Meetings Section */}\n          {calendarConnected && (\n            <div className=\"bg-lean-white rounded-lg shadow-lg p-6 mb-6\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <div>\n                  <h2 className=\"typography-heading text-lean-black\">Upcoming Meetings</h2>\n                  <p className=\"text-sm text-lean-black-70 mt-1\">\n                    Meetings with external contacts for the next 7 days\n                  </p>\n                </div>\n                <button\n                  onClick={() => fetchUpcomingMeetings(true)}\n                  disabled={loadingMeetings}\n                  className=\"px-4 py-2 text-sm text-lean-black-70 hover:text-lean-black transition-colors disabled:opacity-50\"\n                  title=\"Force refresh from Google Calendar (bypasses cache)\"\n                >\n                  {loadingMeetings ? (\n                    <LoaderIcon className=\"w-4 h-4 animate-spin inline\" />\n                  ) : (\n                    'Refresh'\n                  )}\n                </button>\n              </div>\n\n              {loadingMeetings ? (\n                <div className=\"flex items-center justify-center py-8\">\n                  <LoaderIcon className=\"w-6 h-6 animate-spin text-lean-green\" />\n                  <span className=\"ml-3 text-lean-black-70\">Loading meetings...</span>\n                </div>\n              ) : upcomingMeetings.length === 0 ? (\n                <div className=\"text-center py-8\">\n                  <p className=\"text-lean-black-70\">No meetings with external contacts found for the next 7 days.</p>\n                  <p className=\"text-sm text-lean-black-60 mt-2\">Only meetings with external attendees who are known contacts are shown.</p>\n                </div>\n              ) : (() => {\n                // Group meetings by date\n                const meetingsByDate = {};\n                upcomingMeetings.forEach(({ event, matchedAccounts }) => {\n                  const startTime = event.start?.dateTime || event.start?.date;\n                  if (!startTime) return;\n                  \n                  const startDate = new Date(startTime);\n                  const dateKey = startDate.toDateString();\n                  \n                  if (!meetingsByDate[dateKey]) {\n                    meetingsByDate[dateKey] = [];\n                  }\n                  meetingsByDate[dateKey].push({ event, matchedAccounts, startDate });\n                });\n\n                // Sort dates\n                const sortedDates = Object.keys(meetingsByDate).sort((a, b) => \n                  new Date(a) - new Date(b)\n                );\n\n                return (\n                  <div className=\"space-y-6\">\n                    {sortedDates.map((dateKey) => {\n                      const date = new Date(dateKey);\n                      const meetings = meetingsByDate[dateKey].sort((a, b) => \n                        a.startDate - b.startDate\n                      );\n                      const isToday = date.toDateString() === new Date().toDateString();\n                      const isTomorrow = date.toDateString() === new Date(Date.now() + 86400000).toDateString();\n\n                      return (\n                        <div key={dateKey} className=\"border border-lean-black/10 rounded-lg overflow-hidden\">\n                          {/* Date Header */}\n                          <div className={`px-4 py-3 border-b border-lean-black/10 ${\n                            isToday ? 'bg-lean-green-10' : 'bg-lean-almost-white'\n                          }`}>\n                            <div className=\"flex items-center justify-between\">\n                              <div className=\"flex items-center gap-3\">\n                                <div className={`text-2xl font-bold ${\n                                  isToday ? 'text-lean-green' : 'text-lean-black'\n                                }`}>\n                                  {date.getDate()}\n                                </div>\n                                <div>\n                                  <div className=\"font-semibold text-lean-black\">\n                                    {isToday ? 'Today' : isTomorrow ? 'Tomorrow' : date.toLocaleDateString('en-US', { weekday: 'long' })}\n                                  </div>\n                                  <div className=\"text-sm text-lean-black-70\">\n                                    {date.toLocaleDateString('en-US', { month: 'long', year: 'numeric' })}\n                                  </div>\n                                </div>\n                              </div>\n                              <div className=\"text-sm text-lean-black-70\">\n                                {meetings.length} {meetings.length === 1 ? 'meeting' : 'meetings'}\n                              </div>\n                            </div>\n                          </div>\n\n                          {/* Meetings for this date */}\n                          <div className=\"divide-y divide-lean-black/5\">\n                            {meetings.map(({ event, matchedAccounts, startDate }, index) => {\n                              const endTime = event.end?.dateTime || event.end?.date;\n                              const endDate = endTime ? new Date(endTime) : null;\n                              const duration = endDate ? Math.round((endDate - startDate) / (1000 * 60)) : null;\n\n                              return (\n                                <div\n                                  key={event.id || index}\n                                  className=\"p-4 hover:bg-lean-almost-white transition-colors\"\n                                >\n                                  <div className=\"flex gap-4\">\n                                    {/* Time Column */}\n                                    <div className=\"flex-shrink-0 w-24\">\n                                      <div className=\"text-sm font-semibold text-lean-black\">\n                                        {startDate.toLocaleTimeString('en-US', {\n                                          hour: 'numeric',\n                                          minute: '2-digit',\n                                        })}\n                                      </div>\n                                      {endDate && (\n                                        <div className=\"text-xs text-lean-black-60 mt-1\">\n                                          {endDate.toLocaleTimeString('en-US', {\n                                            hour: 'numeric',\n                                            minute: '2-digit',\n                                          })}\n                                        </div>\n                                      )}\n                                      {duration && (\n                                        <div className=\"text-xs text-lean-black-60 mt-1\">\n                                          {duration} min\n                                        </div>\n                                      )}\n                                    </div>\n\n                                    {/* Event Details */}\n                                    <div className=\"flex-1 min-w-0\">\n                                      <div className=\"flex items-start justify-between gap-4\">\n                                        <div className=\"flex-1 min-w-0\">\n                                          <h3 className=\"font-semibold text-lean-black mb-1 truncate\">\n                                            {event.summary || 'No Title'}\n                                          </h3>\n                                          \n                                          {event.location && (\n                                            <div className=\"text-sm text-lean-black-70 mb-2 flex items-center gap-1\">\n                                              <span>üìç</span>\n                                              <span className=\"truncate\">{event.location}</span>\n                                            </div>\n                                          )}\n\n                                          {event.description && (\n                                            <div className=\"text-sm text-lean-black-60 mb-2 line-clamp-2\">\n                                              {event.description}\n                                            </div>\n                                          )}\n\n                                          {matchedAccounts.length > 0 && (\n                                            <div className=\"mt-3\">\n                                              <p className=\"text-xs font-semibold text-lean-black-70 mb-2 uppercase tracking-wide\">\n                                                Accounts to Research:\n                                              </p>\n                                              <div className=\"flex flex-wrap gap-2\">\n                                                {matchedAccounts.map((account) => {\n                                                  // Use salesforce_id (snake_case) from matcher, fallback to salesforceId (camelCase) or id\n                                                  const accountId = account.salesforce_id || account.salesforceId || account.id;\n                                                  return (\n                                                    <button\n                                                      key={account.id}\n                                                      onClick={() => {\n                                                        router.push(`/account/${accountId}/data`);\n                                                      }}\n                                                      className=\"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-lean-green-10 text-lean-green border border-lean-green/20 hover:bg-lean-green hover:text-lean-white transition-colors cursor-pointer\"\n                                                    >\n                                                      {account.name}\n                                                    </button>\n                                                  );\n                                                })}\n                                              </div>\n                                            </div>\n                                          )}\n                                        </div>\n\n                                        {event.htmlLink && (\n                                          <a\n                                            href={event.htmlLink}\n                                            target=\"_blank\"\n                                            rel=\"noopener noreferrer\"\n                                            className=\"flex-shrink-0 px-3 py-1 text-xs text-lean-green hover:text-lean-green/80 hover:underline whitespace-nowrap\"\n                                          >\n                                            Open ‚Üí\n                                          </a>\n                                        )}\n                                      </div>\n                                    </div>\n                                  </div>\n                                </div>\n                              );\n                            })}\n                          </div>\n                        </div>\n                      );\n                    })}\n                  </div>\n                );\n              })()}\n            </div>\n          )}\n        </div>\n      </main>\n    </div>\n  );\n};\n\nexport default CalendarPage;\n\n"],"names":[],"mappings":"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"}}]
}