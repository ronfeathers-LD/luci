{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/ron.feathers/GitHub/LUCI/src/lib/supabase-server.js"],"sourcesContent":["/**\n * Server-side Supabase Client for Next.js\n * Uses the same logic as lib/supabase-client.js but as ES module\n */\n\nexport function getSupabaseClient() {\n  try {\n    const { createClient } = require('@supabase/supabase-js');\n    const supabaseUrl = process.env.SUPABASE_URL;\n    const supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY;\n    \n    if (!supabaseUrl || !supabaseServiceKey) {\n      const missing = [];\n      if (!supabaseUrl) missing.push('SUPABASE_URL');\n      if (!supabaseServiceKey) missing.push('SUPABASE_SERVICE_ROLE_KEY');\n      console.error(`[Supabase] Missing environment variables: ${missing.join(', ')}`);\n      return null;\n    }\n    \n    return createClient(supabaseUrl, supabaseServiceKey, {\n      auth: {\n        autoRefreshToken: false,\n        persistSession: false\n      }\n    });\n  } catch (error) {\n    console.error('[Supabase] Error creating client:', error.message);\n    if (error.stack) {\n      console.error('[Supabase] Stack:', error.stack);\n    }\n    return null;\n  }\n}\n\nexport function validateSupabase(supabase) {\n  if (!supabase) {\n    return {\n      valid: false,\n      error: { status: 503, message: 'Database not configured' }\n    };\n  }\n  return { valid: true };\n}\n\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;;;AAEM,SAAS;IACd,IAAI;QACF,MAAM,EAAE,YAAY,EAAE;QACtB,MAAM,cAAc,QAAQ,GAAG,CAAC,YAAY;QAC5C,MAAM,qBAAqB,QAAQ,GAAG,CAAC,yBAAyB;QAEhE,IAAI,CAAC,eAAe,CAAC,oBAAoB;YACvC,MAAM,UAAU,EAAE;YAClB,IAAI,CAAC,aAAa,QAAQ,IAAI,CAAC;YAC/B,IAAI,CAAC,oBAAoB,QAAQ,IAAI,CAAC;YACtC,QAAQ,KAAK,CAAC,CAAC,0CAA0C,EAAE,QAAQ,IAAI,CAAC,OAAO;YAC/E,OAAO;QACT;QAEA,OAAO,aAAa,aAAa,oBAAoB;YACnD,MAAM;gBACJ,kBAAkB;gBAClB,gBAAgB;YAClB;QACF;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,qCAAqC,MAAM,OAAO;QAChE,IAAI,MAAM,KAAK,EAAE;YACf,QAAQ,KAAK,CAAC,qBAAqB,MAAM,KAAK;QAChD;QACA,OAAO;IACT;AACF;AAEO,SAAS,iBAAiB,QAAQ;IACvC,IAAI,CAAC,UAAU;QACb,OAAO;YACL,OAAO;YACP,OAAO;gBAAE,QAAQ;gBAAK,SAAS;YAA0B;QAC3D;IACF;IACA,OAAO;QAAE,OAAO;IAAK;AACvB"}},
    {"offset": {"line": 98, "column": 0}, "map": {"version":3,"sources":["file:///Users/ron.feathers/GitHub/LUCI/lib/constants.js"],"sourcesContent":["/**\n * Shared Constants\n * \n * Centralized constants used across the application\n */\n\n// Request limits\nconst MAX_REQUEST_SIZE = {\n  DEFAULT: 1024 * 1024, // 1MB\n  LARGE: 10 * 1024 * 1024, // 10MB (for sentiment analysis)\n};\n\n// Timeouts\nconst REQUEST_TIMEOUT = 30000; // 30 seconds\n\n// Rate limiting\nconst RATE_LIMIT = {\n  WINDOW: 60 * 1000, // 1 minute\n  MAX_REQUESTS: 10, // 10 requests per minute per IP\n};\n\n// Cache TTL (in hours, except CALENDAR_EVENTS which is in minutes)\nconst CACHE_TTL = {\n  ACCOUNTS: 1, // 1 hour\n  CASES: 1, // 1 hour\n  CONTACTS: 24, // 24 hours\n  TRANSCRIPTIONS: 24, // 24 hours\n  LINKEDIN_PROFILES: 24, // 24 hours\n  CALENDAR_EVENTS: 15, // 15 minutes (calendar events change frequently)\n};\n\n// API Limits\nconst API_LIMITS = {\n  CASES_PER_ACCOUNT: 25,\n  CONTACTS_PER_ACCOUNT: 100,\n  ACCOUNTS_PER_USER: 1000,\n};\n\nmodule.exports = {\n  MAX_REQUEST_SIZE,\n  REQUEST_TIMEOUT,\n  RATE_LIMIT,\n  CACHE_TTL,\n  API_LIMITS,\n};\n\n"],"names":[],"mappings":"AAAA;;;;CAIC,GAED,iBAAiB;AACjB,MAAM,mBAAmB;IACvB,SAAS,OAAO;IAChB,OAAO,KAAK,OAAO;AACrB;AAEA,WAAW;AACX,MAAM,kBAAkB,OAAO,aAAa;AAE5C,gBAAgB;AAChB,MAAM,aAAa;IACjB,QAAQ,KAAK;IACb,cAAc;AAChB;AAEA,mEAAmE;AACnE,MAAM,YAAY;IAChB,UAAU;IACV,OAAO;IACP,UAAU;IACV,gBAAgB;IAChB,mBAAmB;IACnB,iBAAiB;AACnB;AAEA,aAAa;AACb,MAAM,aAAa;IACjB,mBAAmB;IACnB,sBAAsB;IACtB,mBAAmB;AACrB;AAEA,OAAO,OAAO,GAAG;IACf;IACA;IACA;IACA;IACA;AACF"}},
    {"offset": {"line": 139, "column": 0}, "map": {"version":3,"sources":["file:///Users/ron.feathers/GitHub/LUCI/lib/api-helpers.js"],"sourcesContent":["/**\n * Shared API Helper Functions\n * \n * Common utilities for Vercel serverless functions\n */\n\nconst { MAX_REQUEST_SIZE, REQUEST_TIMEOUT } = require('./constants');\n\n/**\n * Set standard CORS headers\n */\nfunction setCORSHeaders(res, methods = ['GET', 'POST', 'OPTIONS']) {\n  res.setHeader('Access-Control-Allow-Origin', '*');\n  res.setHeader('Access-Control-Allow-Methods', methods.join(', '));\n  res.setHeader('Access-Control-Allow-Headers', 'Content-Type, Authorization');\n}\n\n/**\n * Handle preflight OPTIONS requests\n */\nfunction handlePreflight(req, res) {\n  if (req.method === 'OPTIONS') {\n    setCORSHeaders(res);\n    return res.status(200).end();\n  }\n  return false;\n}\n\n/**\n * Validate request size\n */\nfunction validateRequestSize(req, maxSize = MAX_REQUEST_SIZE.DEFAULT) {\n  const contentLength = req.headers['content-length'];\n  if (contentLength && parseInt(contentLength) > maxSize) {\n    return {\n      valid: false,\n      error: {\n        status: 413,\n        message: 'Request too large',\n      },\n    };\n  }\n  return { valid: true };\n}\n\n/**\n * Sanitize error message for production\n */\nfunction sanitizeError(error, isProduction = false) {\n  if (isProduction) {\n    // In production, don't expose internal error details\n    return {\n      error: 'An error occurred',\n      message: 'Please try again later or contact support if the problem persists.',\n    };\n  }\n  \n  // In development, return full error details\n  return {\n    error: error.message || 'An error occurred',\n    message: error.message,\n    stack: error.stack,\n  };\n}\n\n/**\n * Standard error response\n */\nfunction sendErrorResponse(res, error, statusCode = 500, isProduction = false) {\n  setCORSHeaders(res);\n  const sanitized = sanitizeError(error, isProduction);\n  return res.status(statusCode).json(sanitized);\n}\n\n/**\n * Standard success response\n */\nfunction sendSuccessResponse(res, data, statusCode = 200) {\n  setCORSHeaders(res);\n  return res.status(statusCode).json(data);\n}\n\n/**\n * Get client IP address from request\n */\nfunction getClientIP(req) {\n  return req.headers['x-forwarded-for']?.split(',')[0] || \n         req.headers['x-real-ip'] || \n         req.connection?.remoteAddress || \n         'unknown';\n}\n\n/**\n * Validate Supabase client and return error response if invalid\n * \n * @param {Object|null} supabase - Supabase client instance\n * @param {Object} res - Express response object\n * @returns {boolean} True if valid, false if invalid (response already sent)\n */\nfunction validateSupabase(supabase, res) {\n  if (!supabase) {\n    sendErrorResponse(res, new Error('Database not configured'), 503, isProduction());\n    return false;\n  }\n  return true;\n}\n\n/**\n * Check if environment is production\n */\nfunction isProduction() {\n  return process.env.NODE_ENV === 'production';\n}\n\n/**\n * Structured logging with levels\n */\nfunction formatLog(level, message) {\n  const timestamp = new Date().toISOString();\n  return `[${timestamp}] [${level.toUpperCase()}] ${message}`;\n}\n\n/**\n * Info log (only in non-production)\n */\nfunction log(message, data = null) {\n  if (!isProduction()) {\n    if (data) {\n      console.log(formatLog('info', message), data);\n    } else {\n      console.log(formatLog('info', message));\n    }\n  }\n}\n\n/**\n * Error log (always logs, even in production)\n */\nfunction logError(message, error = null) {\n  if (error) {\n    console.error(formatLog('error', message), error);\n  } else {\n    console.error(formatLog('error', message));\n  }\n}\n\n/**\n * Warning log (only in non-production)\n */\nfunction logWarn(message, data = null) {\n  if (!isProduction()) {\n    if (data) {\n      console.warn(formatLog('warn', message), data);\n    } else {\n      console.warn(formatLog('warn', message));\n    }\n  }\n}\n\n/**\n * Debug log (only in non-production, for verbose debugging)\n */\nfunction logDebug(message, data = null) {\n  if (!isProduction() && process.env.DEBUG === 'true') {\n    if (data) {\n      console.log(formatLog('debug', message), data);\n    } else {\n      console.log(formatLog('debug', message));\n    }\n  }\n}\n\n/**\n * Simple in-memory rate limiter\n * For production, use Redis or similar distributed store\n */\nconst rateLimitStore = new Map();\n\nfunction checkRateLimit(ip, windowMs, maxRequests) {\n  const now = Date.now();\n  const key = ip;\n  \n  if (!rateLimitStore.has(key)) {\n    rateLimitStore.set(key, { count: 1, resetTime: now + windowMs });\n    return true;\n  }\n  \n  const record = rateLimitStore.get(key);\n  \n  // Reset if window expired\n  if (now > record.resetTime) {\n    record.count = 1;\n    record.resetTime = now + windowMs;\n    return true;\n  }\n  \n  // Check if limit exceeded\n  if (record.count >= maxRequests) {\n    return false;\n  }\n  \n  record.count++;\n  return true;\n}\n\n// Clean up old entries periodically\nconst { RATE_LIMIT } = require('./constants');\nsetInterval(() => {\n  const now = Date.now();\n  for (const [key, record] of rateLimitStore.entries()) {\n    if (now > record.resetTime) {\n      rateLimitStore.delete(key);\n    }\n  }\n}, RATE_LIMIT.WINDOW);\n\nmodule.exports = {\n  setCORSHeaders,\n  handlePreflight,\n  validateRequestSize,\n  sanitizeError,\n  sendErrorResponse,\n  sendSuccessResponse,\n  getClientIP,\n  validateSupabase,\n  checkRateLimit,\n  isProduction,\n  log,\n  logError,\n  logWarn,\n  logDebug,\n};\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 340, "column": 0}, "map": {"version":3,"sources":["file:///Users/ron.feathers/GitHub/LUCI/src/lib/next-api-helpers.js"],"sourcesContent":["/**\n * Next.js API Route Helper Functions\n * \n * Adapters for existing lib/api-helpers.js to work with Next.js\n * Can use require() for existing helpers\n */\n\nimport { NextResponse } from 'next/server';\n\n// Import existing helpers (they work in Next.js via require)\n// From src/lib/next-api-helpers.js -> up to src/ -> up to root/ -> lib/\nconst apiHelpers = require('../../lib/api-helpers');\nconst { MAX_REQUEST_SIZE, REQUEST_TIMEOUT, RATE_LIMIT } = require('../../lib/constants');\n\n/**\n * Set CORS headers for Next.js Response\n */\nexport function setCORSHeaders(response, methods = ['GET', 'POST', 'OPTIONS']) {\n  response.headers.set('Access-Control-Allow-Origin', '*');\n  response.headers.set('Access-Control-Allow-Methods', methods.join(', '));\n  response.headers.set('Access-Control-Allow-Headers', 'Content-Type, Authorization');\n  return response;\n}\n\n/**\n * Handle preflight OPTIONS requests for Next.js\n */\nexport async function handlePreflight(request) {\n  if (request.method === 'OPTIONS') {\n    const response = new NextResponse(null, { status: 200 });\n    return setCORSHeaders(response);\n  }\n  return null;\n}\n\n/**\n * Validate request size for Next.js\n */\nexport function validateRequestSize(request, maxSize = MAX_REQUEST_SIZE.DEFAULT) {\n  const contentLength = request.headers.get('content-length');\n  if (contentLength && parseInt(contentLength) > maxSize) {\n    return {\n      valid: false,\n      error: {\n        status: 413,\n        message: 'Request too large',\n      },\n    };\n  }\n  return { valid: true };\n}\n\n/**\n * Send error response for Next.js\n */\nexport function sendErrorResponse(error, statusCode = 500) {\n  const isProd = apiHelpers.isProduction();\n  const sanitized = {\n    error: isProd ? 'An error occurred' : (error?.message || 'An error occurred'),\n    message: isProd ? 'Please try again later or contact support if the problem persists.' : (error?.message || 'An error occurred'),\n  };\n  \n  if (!isProd && error?.stack) {\n    sanitized.stack = error.stack;\n  }\n  \n  const response = NextResponse.json(sanitized, { status: statusCode });\n  return setCORSHeaders(response);\n}\n\n/**\n * Send success response for Next.js\n */\nexport function sendSuccessResponse(data, statusCode = 200) {\n  const response = NextResponse.json(data, { status: statusCode });\n  return setCORSHeaders(response);\n}\n\n/**\n * Get client IP from Next.js Request\n */\nexport function getClientIP(request) {\n  const forwarded = request.headers.get('x-forwarded-for');\n  if (forwarded) {\n    return forwarded.split(',')[0].trim();\n  }\n  return request.headers.get('x-real-ip') || 'unknown';\n}\n\n/**\n * Validate Supabase client for Next.js\n */\nexport function validateSupabase(supabase) {\n  if (!supabase) {\n    return {\n      valid: false,\n      error: { status: 503, message: 'Database not configured' }\n    };\n  }\n  return { valid: true };\n}\n\n/**\n * Check rate limit\n */\nexport function checkRateLimit(ip, windowMs, maxRequests) {\n  return apiHelpers.checkRateLimit(ip, windowMs, maxRequests);\n}\n\n// Re-export other helpers\nexport const log = apiHelpers.log;\nexport const logError = apiHelpers.logError;\nexport const logWarn = apiHelpers.logWarn;\nexport const logDebug = apiHelpers.logDebug;\nexport const isProduction = apiHelpers.isProduction;\n\n"],"names":[],"mappings":"AAAA;;;;;CAKC;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAED;;AAEA,6DAA6D;AAC7D,wEAAwE;AACxE,MAAM;AACN,MAAM,EAAE,gBAAgB,EAAE,eAAe,EAAE,UAAU,EAAE;AAKhD,SAAS,eAAe,QAAQ,EAAE,UAAU;IAAC;IAAO;IAAQ;CAAU;IAC3E,SAAS,OAAO,CAAC,GAAG,CAAC,+BAA+B;IACpD,SAAS,OAAO,CAAC,GAAG,CAAC,gCAAgC,QAAQ,IAAI,CAAC;IAClE,SAAS,OAAO,CAAC,GAAG,CAAC,gCAAgC;IACrD,OAAO;AACT;AAKO,eAAe,gBAAgB,OAAO;IAC3C,IAAI,QAAQ,MAAM,KAAK,WAAW;QAChC,MAAM,WAAW,IAAI,gJAAY,CAAC,MAAM;YAAE,QAAQ;QAAI;QACtD,OAAO,eAAe;IACxB;IACA,OAAO;AACT;AAKO,SAAS,oBAAoB,OAAO,EAAE,UAAU,iBAAiB,OAAO;IAC7E,MAAM,gBAAgB,QAAQ,OAAO,CAAC,GAAG,CAAC;IAC1C,IAAI,iBAAiB,SAAS,iBAAiB,SAAS;QACtD,OAAO;YACL,OAAO;YACP,OAAO;gBACL,QAAQ;gBACR,SAAS;YACX;QACF;IACF;IACA,OAAO;QAAE,OAAO;IAAK;AACvB;AAKO,SAAS,kBAAkB,KAAK,EAAE,aAAa,GAAG;IACvD,MAAM,SAAS,WAAW,YAAY;IACtC,MAAM,YAAY;QAChB,OAAO,SAAS,sBAAuB,OAAO,WAAW;QACzD,SAAS,SAAS,uEAAwE,OAAO,WAAW;IAC9G;IAEA,IAAI,CAAC,UAAU,OAAO,OAAO;QAC3B,UAAU,KAAK,GAAG,MAAM,KAAK;IAC/B;IAEA,MAAM,WAAW,gJAAY,CAAC,IAAI,CAAC,WAAW;QAAE,QAAQ;IAAW;IACnE,OAAO,eAAe;AACxB;AAKO,SAAS,oBAAoB,IAAI,EAAE,aAAa,GAAG;IACxD,MAAM,WAAW,gJAAY,CAAC,IAAI,CAAC,MAAM;QAAE,QAAQ;IAAW;IAC9D,OAAO,eAAe;AACxB;AAKO,SAAS,YAAY,OAAO;IACjC,MAAM,YAAY,QAAQ,OAAO,CAAC,GAAG,CAAC;IACtC,IAAI,WAAW;QACb,OAAO,UAAU,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI;IACrC;IACA,OAAO,QAAQ,OAAO,CAAC,GAAG,CAAC,gBAAgB;AAC7C;AAKO,SAAS,iBAAiB,QAAQ;IACvC,IAAI,CAAC,UAAU;QACb,OAAO;YACL,OAAO;YACP,OAAO;gBAAE,QAAQ;gBAAK,SAAS;YAA0B;QAC3D;IACF;IACA,OAAO;QAAE,OAAO;IAAK;AACvB;AAKO,SAAS,eAAe,EAAE,EAAE,QAAQ,EAAE,WAAW;IACtD,OAAO,WAAW,cAAc,CAAC,IAAI,UAAU;AACjD;AAGO,MAAM,MAAM,WAAW,GAAG;AAC1B,MAAM,WAAW,WAAW,QAAQ;AACpC,MAAM,UAAU,WAAW,OAAO;AAClC,MAAM,WAAW,WAAW,QAAQ;AACpC,MAAM,eAAe,WAAW,YAAY"}},
    {"offset": {"line": 466, "column": 0}, "map": {"version":3,"sources":["file:///Users/ron.feathers/GitHub/LUCI/src/lib/roles-helpers.js"],"sourcesContent":["/**\n * Roles Helper Functions\n * Shared utilities for role management (used across API routes)\n */\n\nfunction logError(message, error) {\n  console.error(`[ERROR] ${message}`, error);\n}\n\n/**\n * Get all roles for a user\n */\nexport async function getUserRoles(supabase, userId) {\n  const { data, error } = await supabase\n    .from('user_roles')\n    .select(`\n      role:roles!inner(id, name, description)\n    `)\n    .eq('user_id', userId);\n\n  if (error) {\n    logError('Error fetching user roles:', error);\n    return [];\n  }\n\n  return (data || []).map(item => item.role);\n}\n\n/**\n * Check if a user has a specific role (case-insensitive)\n */\nexport async function userHasRole(supabase, userId, roleName) {\n  if (!roleName) return false;\n  \n  const { data, error } = await supabase\n    .from('user_roles')\n    .select(`\n      role:roles!inner(name)\n    `)\n    .eq('user_id', userId)\n    .limit(100);\n\n  if (error) {\n    logError('Error checking user role:', error);\n    return false;\n  }\n\n  // Case-insensitive comparison\n  const normalizedRoleName = roleName.toLowerCase();\n  return data && data.some(item => item.role && item.role.name && item.role.name.toLowerCase() === normalizedRoleName);\n}\n\n/**\n * Get all users with their roles and login stats\n */\nexport async function getAllUsersWithRoles(supabase) {\n  const { data: users, error: usersError } = await supabase\n    .from('users')\n    .select('id, email, name, picture, created_at')\n    .order('created_at', { ascending: false });\n\n  if (usersError) {\n    logError('Error fetching users:', usersError);\n    throw usersError;\n  }\n\n  const { data: userRoles, error: rolesError } = await supabase\n    .from('user_roles')\n    .select(`\n      user_id,\n      role:roles!inner(id, name, description)\n    `);\n\n  if (rolesError) {\n    logError('Error fetching user roles:', rolesError);\n    throw rolesError;\n  }\n\n  // Get login stats\n  const userIds = (users || []).map(u => u.id);\n  let loginStats = {};\n  \n  if (userIds.length > 0) {\n    const { data: loginData, error: loginError } = await supabase\n      .from('user_logins')\n      .select('user_id, logged_in_at')\n      .in('user_id', userIds);\n\n    if (!loginError && loginData) {\n      loginData.forEach(login => {\n        if (!loginStats[login.user_id]) {\n          loginStats[login.user_id] = {\n            last_login: login.logged_in_at,\n            first_login: login.logged_in_at,\n            login_count: 0,\n          };\n        }\n        const stats = loginStats[login.user_id];\n        stats.login_count++;\n        if (new Date(login.logged_in_at) > new Date(stats.last_login)) {\n          stats.last_login = login.logged_in_at;\n        }\n        if (new Date(login.logged_in_at) < new Date(stats.first_login)) {\n          stats.first_login = login.logged_in_at;\n        }\n      });\n    }\n  }\n\n  const rolesByUserId = {};\n  (userRoles || []).forEach(ur => {\n    if (!rolesByUserId[ur.user_id]) {\n      rolesByUserId[ur.user_id] = [];\n    }\n    rolesByUserId[ur.user_id].push(ur.role);\n  });\n\n  return (users || []).map(user => ({\n    ...user,\n    roles: rolesByUserId[user.id] || [],\n    login_stats: loginStats[user.id] || { last_login: null, first_login: null, login_count: 0 },\n  }));\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 565, "column": 0}, "map": {"version":3,"sources":["file:///Users/ron.feathers/GitHub/LUCI/src/app/api/users/route.js"],"sourcesContent":["/**\n * Next.js App Router API Route for User Management\n * \n * Handles:\n * - User creation/retrieval (POST/GET)\n * Uses Supabase for data persistence\n */\n\nimport { NextRequest } from 'next/server';\nimport { getSupabaseClient, validateSupabase } from '../../../lib/supabase-server';\nimport { sendErrorResponse, sendSuccessResponse, getClientIP } from '../../../lib/next-api-helpers';\nimport { getUserRoles } from '../../../lib/roles-helpers';\n\nfunction logError(message, error) {\n  console.error(`[ERROR] ${message}`, error);\n}\n\nfunction logWarn(message) {\n  if (process.env.NODE_ENV !== 'production') {\n    console.warn(`[WARN] ${message}`);\n  }\n}\n\n// Handle OPTIONS preflight\nexport async function OPTIONS() {\n  const response = new Response(null, { status: 200 });\n  response.headers.set('Access-Control-Allow-Origin', '*');\n  response.headers.set('Access-Control-Allow-Methods', 'GET, POST, OPTIONS');\n  response.headers.set('Access-Control-Allow-Headers', 'Content-Type, Authorization');\n  return response;\n}\n\n// POST /api/users - Create or update user\nexport async function POST(request) {\n  try {\n    const { email, name, picture, sub } = await request.json();\n\n    if (!email || !sub) {\n      return sendErrorResponse(new Error('Missing required fields: email and sub'), 400);\n    }\n\n    const supabase = getSupabaseClient();\n    const validation = validateSupabase(supabase);\n    \n    if (!validation.valid) {\n      return sendErrorResponse(new Error(validation.error.message), validation.error.status);\n    }\n\n    // Check if user exists\n    const { data: existingUser, error: fetchError } = await supabase\n      .from('users')\n      .select('*')\n      .eq('google_sub', sub)\n      .single();\n\n    let user;\n\n    if (existingUser) {\n      // Update existing user\n      const { data: updatedUser, error: updateError } = await supabase\n        .from('users')\n        .update({\n          email: email,\n          name: name || existingUser.name,\n          picture: picture || existingUser.picture,\n          updated_at: new Date().toISOString(),\n        })\n        .eq('google_sub', sub)\n        .select()\n        .single();\n\n      if (updateError) {\n        logError('Error updating user:', updateError);\n        throw updateError;\n      }\n\n      user = updatedUser;\n    } else {\n      // Create new user\n      const { data: newUser, error: insertError } = await supabase\n        .from('users')\n        .insert({\n          google_sub: sub,\n          email: email,\n          name: name || email.split('@')[0],\n          picture: picture || null,\n          role: 'Account Manager',\n        })\n        .select()\n        .single();\n\n      if (insertError) {\n        logError('Error creating user:', insertError);\n        throw insertError;\n      }\n\n      user = newUser;\n\n      // Assign default \"Account Manager\" role\n      const { data: defaultRole, error: roleError } = await supabase\n        .from('roles')\n        .select('id')\n        .eq('name', 'Account Manager')\n        .single();\n\n      if (roleError) {\n        logError('Error fetching Account Manager role:', roleError);\n      }\n\n      if (defaultRole) {\n        const { error: insertRoleError } = await supabase\n          .from('user_roles')\n          .insert({\n            user_id: user.id,\n            role_id: defaultRole.id,\n          });\n\n        if (insertRoleError) {\n          logError('Error assigning default role to new user:', insertRoleError);\n        }\n      } else if (!roleError) {\n        logWarn('Could not assign default role to new user - Account Manager role not found in database');\n      }\n    }\n\n    // Record login event\n    const ipAddress = getClientIP(request);\n    const userAgent = request.headers.get('user-agent') || null;\n    \n    const { error: loginLogError } = await supabase\n      .from('user_logins')\n      .insert({\n        user_id: user.id,\n        ip_address: ipAddress,\n        user_agent: userAgent,\n      });\n\n    if (loginLogError) {\n      logError('Error recording login event:', loginLogError);\n    }\n\n    // Fetch and include roles\n    const roles = await getUserRoles(supabase, user.id);\n    const userWithRoles = {\n      ...user,\n      roles: roles,\n    };\n\n    return sendSuccessResponse(userWithRoles);\n  } catch (error) {\n    logError('Error in POST /api/users:', error);\n    return sendErrorResponse(error, 500);\n  }\n}\n\n// GET /api/users - Get user by email, id, or google_sub\nexport async function GET(request) {\n  try {\n    const { searchParams } = new URL(request.url);\n    const email = searchParams.get('email');\n    const id = searchParams.get('id');\n    const google_sub = searchParams.get('google_sub');\n\n    if (!email && !id && !google_sub) {\n      return sendErrorResponse(new Error('Missing required parameter: email, id, or google_sub'), 400);\n    }\n\n    const supabase = getSupabaseClient();\n    const validation = validateSupabase(supabase);\n    \n    if (!validation.valid) {\n      return sendErrorResponse(new Error(validation.error.message), validation.error.status);\n    }\n\n    // Build query based on provided parameter\n    let query = supabase.from('users').select('*');\n\n    if (id) {\n      query = query.eq('id', id);\n    } else if (google_sub) {\n      query = query.eq('google_sub', google_sub);\n    } else if (email) {\n      query = query.eq('email', email);\n    }\n\n    const { data: user, error: fetchError } = await query.single();\n\n    if (fetchError) {\n      if (fetchError.code === 'PGRST116') {\n        return sendErrorResponse(new Error('User not found'), 404);\n      }\n      logError('Error fetching user:', fetchError);\n      throw fetchError;\n    }\n\n    // Fetch and include roles\n    const roles = await getUserRoles(supabase, user.id);\n    const userWithRoles = {\n      ...user,\n      roles: roles,\n    };\n\n    return sendSuccessResponse(userWithRoles);\n  } catch (error) {\n    logError('Error in GET /api/users:', error);\n    return sendErrorResponse(error, 500);\n  }\n}\n\n"],"names":[],"mappings":"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"}}]
}