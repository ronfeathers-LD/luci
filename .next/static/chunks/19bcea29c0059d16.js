(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"warnOnce",{enumerable:!0,get:function(){return a}});let a=e=>{}},98183,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a={assign:function(){return o},searchParamsToUrlQuery:function(){return s},urlQueryToSearchParams:function(){return i}};for(var r in a)Object.defineProperty(n,r,{enumerable:!0,get:a[r]});function s(e){let t={};for(let[n,a]of e.entries()){let e=t[n];void 0===e?t[n]=a:Array.isArray(e)?e.push(a):t[n]=[e,a]}return t}function l(e){return"string"==typeof e?e:("number"!=typeof e||isNaN(e))&&"boolean"!=typeof e?"":String(e)}function i(e){let t=new URLSearchParams;for(let[n,a]of Object.entries(e))if(Array.isArray(a))for(let e of a)t.append(n,l(e));else t.set(n,l(a));return t}function o(e,...t){for(let n of t){for(let t of n.keys())e.delete(t);for(let[t,a]of n.entries())e.append(t,a)}return e}},95057,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a={formatUrl:function(){return i},formatWithValidation:function(){return c},urlObjectKeys:function(){return o}};for(var r in a)Object.defineProperty(n,r,{enumerable:!0,get:a[r]});let s=e.r(90809)._(e.r(98183)),l=/https?|ftp|gopher|file/;function i(e){let{auth:t,hostname:n}=e,a=e.protocol||"",r=e.pathname||"",i=e.hash||"",o=e.query||"",c=!1;t=t?encodeURIComponent(t).replace(/%3A/i,":")+"@":"",e.host?c=t+e.host:n&&(c=t+(~n.indexOf(":")?`[${n}]`:n),e.port&&(c+=":"+e.port)),o&&"object"==typeof o&&(o=String(s.urlQueryToSearchParams(o)));let d=e.search||o&&`?${o}`||"";return a&&!a.endsWith(":")&&(a+=":"),e.slashes||(!a||l.test(a))&&!1!==c?(c="//"+(c||""),r&&"/"!==r[0]&&(r="/"+r)):c||(c=""),i&&"#"!==i[0]&&(i="#"+i),d&&"?"!==d[0]&&(d="?"+d),r=r.replace(/[?#]/g,encodeURIComponent),d=d.replace("#","%23"),`${a}${c}${r}${d}${i}`}let o=["auth","hash","host","hostname","href","path","pathname","port","protocol","query","search","slashes"];function c(e){return i(e)}},18581,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"useMergedRef",{enumerable:!0,get:function(){return r}});let a=e.r(71645);function r(e,t){let n=(0,a.useRef)(null),r=(0,a.useRef)(null);return(0,a.useCallback)(a=>{if(null===a){let e=n.current;e&&(n.current=null,e());let t=r.current;t&&(r.current=null,t())}else e&&(n.current=s(e,a)),t&&(r.current=s(t,a))},[e,t])}function s(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let n=e(t);return"function"==typeof n?n:()=>e(null)}}("function"==typeof n.default||"object"==typeof n.default&&null!==n.default)&&void 0===n.default.__esModule&&(Object.defineProperty(n.default,"__esModule",{value:!0}),Object.assign(n.default,n),t.exports=n.default)},18967,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a={DecodeError:function(){return h},MiddlewareNotFoundError:function(){return j},MissingStaticPage:function(){return v},NormalizeError:function(){return g},PageNotFoundError:function(){return y},SP:function(){return p},ST:function(){return b},WEB_VITALS:function(){return s},execOnce:function(){return l},getDisplayName:function(){return u},getLocationOrigin:function(){return c},getURL:function(){return d},isAbsoluteUrl:function(){return o},isResSent:function(){return m},loadGetInitialProps:function(){return x},normalizeRepeatedSlashes:function(){return f},stringifyError:function(){return N}};for(var r in a)Object.defineProperty(n,r,{enumerable:!0,get:a[r]});let s=["CLS","FCP","FID","INP","LCP","TTFB"];function l(e){let t,n=!1;return(...a)=>(n||(n=!0,t=e(...a)),t)}let i=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,o=e=>i.test(e);function c(){let{protocol:e,hostname:t,port:n}=window.location;return`${e}//${t}${n?":"+n:""}`}function d(){let{href:e}=window.location,t=c();return e.substring(t.length)}function u(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function m(e){return e.finished||e.headersSent}function f(e){let t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?`?${t.slice(1).join("?")}`:"")}async function x(e,t){let n=t.res||t.ctx&&t.ctx.res;if(!e.getInitialProps)return t.ctx&&t.Component?{pageProps:await x(t.Component,t.ctx)}:{};let a=await e.getInitialProps(t);if(n&&m(n))return a;if(!a)throw Object.defineProperty(Error(`"${u(e)}.getInitialProps()" should resolve to an object. But found "${a}" instead.`),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return a}let p="undefined"!=typeof performance,b=p&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class h extends Error{}class g extends Error{}class y extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message=`Cannot find module for page: ${e}`}}class v extends Error{constructor(e,t){super(),this.message=`Failed to load static file for page: ${e} ${t}`}}class j extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function N(e){return JSON.stringify({message:e.message,stack:e.stack})}},73668,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"isLocalURL",{enumerable:!0,get:function(){return s}});let a=e.r(18967),r=e.r(52817);function s(e){if(!(0,a.isAbsoluteUrl)(e))return!0;try{let t=(0,a.getLocationOrigin)(),n=new URL(e,t);return n.origin===t&&(0,r.hasBasePath)(n.pathname)}catch(e){return!1}}},84508,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"errorOnce",{enumerable:!0,get:function(){return a}});let a=e=>{}},22016,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a={default:function(){return h},useLinkStatus:function(){return y}};for(var r in a)Object.defineProperty(n,r,{enumerable:!0,get:a[r]});let s=e.r(90809),l=e.r(43476),i=s._(e.r(71645)),o=e.r(95057),c=e.r(8372),d=e.r(18581),u=e.r(18967),m=e.r(5550);e.r(33525);let f=e.r(91949),x=e.r(73668),p=e.r(9396);function b(e){return"string"==typeof e?e:(0,o.formatUrl)(e)}function h(t){var n;let a,r,s,[o,h]=(0,i.useOptimistic)(f.IDLE_LINK_STATUS),y=(0,i.useRef)(null),{href:v,as:j,children:N,prefetch:k=null,passHref:w,replace:C,shallow:S,scroll:E,onClick:_,onMouseEnter:P,onTouchStart:A,legacyBehavior:I=!1,onNavigate:L,ref:T,unstable_dynamicOnHover:O,...$}=t;a=N,I&&("string"==typeof a||"number"==typeof a)&&(a=(0,l.jsx)("a",{children:a}));let R=i.default.useContext(c.AppRouterContext),U=!1!==k,M=!1!==k?null===(n=k)||"auto"===n?p.FetchStrategy.PPR:p.FetchStrategy.Full:p.FetchStrategy.PPR,{href:V,as:D}=i.default.useMemo(()=>{let e=b(v);return{href:e,as:j?b(j):e}},[v,j]);if(I){if(a?.$$typeof===Symbol.for("react.lazy"))throw Object.defineProperty(Error("`<Link legacyBehavior>` received a direct child that is either a Server Component, or JSX that was loaded with React.lazy(). This is not supported. Either remove legacyBehavior, or make the direct child a Client Component that renders the Link's `<a>` tag."),"__NEXT_ERROR_CODE",{value:"E863",enumerable:!1,configurable:!0});r=i.default.Children.only(a)}let F=I?r&&"object"==typeof r&&r.ref:T,B=i.default.useCallback(e=>(null!==R&&(y.current=(0,f.mountLinkInstance)(e,V,R,M,U,h)),()=>{y.current&&((0,f.unmountLinkForCurrentNavigation)(y.current),y.current=null),(0,f.unmountPrefetchableInstance)(e)}),[U,V,R,M,h]),z={ref:(0,d.useMergedRef)(B,F),onClick(t){I||"function"!=typeof _||_(t),I&&r.props&&"function"==typeof r.props.onClick&&r.props.onClick(t),!R||t.defaultPrevented||function(t,n,a,r,s,l,o){if("undefined"!=typeof window){let c,{nodeName:d}=t.currentTarget;if("A"===d.toUpperCase()&&((c=t.currentTarget.getAttribute("target"))&&"_self"!==c||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||t.nativeEvent&&2===t.nativeEvent.which)||t.currentTarget.hasAttribute("download"))return;if(!(0,x.isLocalURL)(n)){s&&(t.preventDefault(),location.replace(n));return}if(t.preventDefault(),o){let e=!1;if(o({preventDefault:()=>{e=!0}}),e)return}let{dispatchNavigateAction:u}=e.r(99781);i.default.startTransition(()=>{u(a||n,s?"replace":"push",l??!0,r.current)})}}(t,V,D,y,C,E,L)},onMouseEnter(e){I||"function"!=typeof P||P(e),I&&r.props&&"function"==typeof r.props.onMouseEnter&&r.props.onMouseEnter(e),R&&U&&(0,f.onNavigationIntent)(e.currentTarget,!0===O)},onTouchStart:function(e){I||"function"!=typeof A||A(e),I&&r.props&&"function"==typeof r.props.onTouchStart&&r.props.onTouchStart(e),R&&U&&(0,f.onNavigationIntent)(e.currentTarget,!0===O)}};return(0,u.isAbsoluteUrl)(D)?z.href=D:I&&!w&&("a"!==r.type||"href"in r.props)||(z.href=(0,m.addBasePath)(D)),s=I?i.default.cloneElement(r,z):(0,l.jsx)("a",{...$,...z,children:a}),(0,l.jsx)(g.Provider,{value:o,children:s})}e.r(84508);let g=(0,i.createContext)(f.IDLE_LINK_STATUS),y=()=>(0,i.useContext)(g);("function"==typeof n.default||"object"==typeof n.default&&null!==n.default)&&void 0===n.default.__esModule&&(Object.defineProperty(n.default,"__esModule",{value:!0}),Object.assign(n.default,n),t.exports=n.default)},9308,e=>{"use strict";var t=e.i(43476);e.i(71645);var n=e.i(18566);e.i(22016),e.s(["default",0,({user:e,onSignOut:a,showHelp:r,setShowHelp:s})=>{let l=(0,n.useRouter)(),i=(0,n.usePathname)()||"/",o=e=>"/"===e?"/"===i||""===i:i.startsWith(e),c=()=>window.getBuildVersion?window.getBuildVersion():Date.now().toString();return(0,t.jsx)("header",{className:"bg-lean-black px-4 sm:px-6 lg:px-8 py-4 flex-shrink-0",children:(0,t.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("img",{src:`/ld-logo-abbr-green.png?v=${c()}`,alt:"LeanData Logo",className:"h-12 w-auto flex-shrink-0"},`logo-${c()}`),(0,t.jsxs)("div",{className:"text-left",children:[(0,t.jsx)("h1",{className:"typography-heading text-[#f7f7f7] mb-1",children:"L.U.C.I."}),(0,t.jsx)("p",{className:"text-sm text-[#f7f7f7]",children:"LeanData Unified Customer Intelligence"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[s&&(0,t.jsxs)("button",{onClick:()=>s(!r),className:"px-3 py-2 text-sm font-medium text-[#f7f7f7] hover:text-lean-green transition-colors flex items-center gap-2","aria-label":"Show help and information",children:[(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),r?"Hide":"Help"]}),(0,t.jsxs)("div",{className:"flex items-center gap-3 bg-lean-black/50 px-4 py-2 rounded-lg",children:[(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("button",{onClick:()=>l.push("/user"),className:"text-sm font-medium text-[#f7f7f7] hover:text-lean-green transition-colors cursor-pointer text-right","aria-label":"Go to account settings",children:e?.name||"User"}),(0,t.jsx)("p",{className:"text-xs text-[#f7f7f7]",children:e?.email}),e?.role&&(0,t.jsx)("p",{className:"text-xs text-lean-green font-medium",children:e.role})]}),(0,t.jsxs)("div",{className:"w-8 h-8 rounded-full bg-lean-green flex items-center justify-center flex-shrink-0",children:[e?.picture?(0,t.jsx)("img",{src:e.picture,alt:e.name||"User",className:"w-8 h-8 rounded-full object-cover",onError:e=>{e.target.style.display="none";let t=e.target.nextSibling;t&&(t.style.display="flex")}}):null,(0,t.jsx)("div",{className:"w-8 h-8 rounded-full bg-lean-green flex items-center justify-center text-white text-xs font-semibold",style:{display:e?.picture?"none":"flex"},children:e?.name?e.name.split(" ").map(e=>e[0]).join("").toUpperCase().substring(0,2):e?.email?e.email.substring(0,2).toUpperCase():"U"})]})]}),(0,t.jsx)("button",{onClick:()=>{a?a():(window.google?.accounts?.id&&window.google.accounts.id.disableAutoSelect(),localStorage.removeItem("userInfo"),window.location.reload())},className:"px-4 py-2 text-sm font-medium text-[#f7f7f7] hover:text-lean-green transition-colors whitespace-nowrap",children:"Sign Out"})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between gap-1 border-b border-[#f7f7f7]/20",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("button",{onClick:()=>l.push("/"),className:`px-4 py-2 text-sm font-medium transition-colors border-b-2 ${o("/")&&"/user"!==i&&"/calendar"!==i&&"/analyze"!==i&&!i.startsWith("/admin")&&!i.startsWith("/account")&&!i.startsWith("/sentiment")?"text-lean-green border-lean-green":"text-[#f7f7f7]/70 border-transparent hover:text-[#f7f7f7] hover:border-[#f7f7f7]/30"}`,"aria-label":"Go to dashboard",children:"Dashboard"}),(0,t.jsx)("button",{onClick:()=>l.push("/analyze"),className:`px-4 py-2 text-sm font-medium transition-colors border-b-2 ${o("/analyze")?"text-lean-green border-lean-green":"text-[#f7f7f7]/70 border-transparent hover:text-[#f7f7f7] hover:border-[#f7f7f7]/30"}`,"aria-label":"Run sentiment analysis",children:"Analyze"}),(0,t.jsx)("button",{onClick:()=>l.push("/user"),className:`px-4 py-2 text-sm font-medium transition-colors border-b-2 ${o("/user")?"text-lean-green border-lean-green":"text-[#f7f7f7]/70 border-transparent hover:text-[#f7f7f7] hover:border-[#f7f7f7]/30"}`,"aria-label":"Manage my accounts",children:"My Accounts"}),(0,t.jsx)("button",{onClick:()=>l.push("/calendar"),className:`px-4 py-2 text-sm font-medium transition-colors border-b-2 ${o("/calendar")?"text-lean-green border-lean-green":"text-[#f7f7f7]/70 border-transparent hover:text-[#f7f7f7] hover:border-[#f7f7f7]/30"}`,"aria-label":"View calendar",children:"Calendar"})]}),((t=e)=>!!t&&!!t.roles&&t.roles.some(e=>e.name&&"admin"===e.name.toLowerCase()))(e)&&(0,t.jsx)("button",{onClick:()=>l.push("/admin"),className:`px-4 py-2 text-sm font-medium transition-colors border-b-2 ${o("/admin")?"text-blue-400 border-blue-400":"text-[#f7f7f7]/70 border-transparent hover:text-[#f7f7f7] hover:border-[#f7f7f7]/30"}`,"aria-label":"Go to admin panel",children:"Admin"})]})]})})}])},47791,e=>{"use strict";var t=e.i(43476);e.s(["LoaderIcon",0,({className:e})=>(0,t.jsxs)("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,t.jsx)("line",{x1:"12",y1:"2",x2:"12",y2:"6"}),(0,t.jsx)("line",{x1:"12",y1:"18",x2:"12",y2:"22"}),(0,t.jsx)("line",{x1:"4.93",y1:"4.93",x2:"7.76",y2:"7.76"}),(0,t.jsx)("line",{x1:"16.24",y1:"16.24",x2:"19.07",y2:"19.07"}),(0,t.jsx)("line",{x1:"2",y1:"12",x2:"6",y2:"12"}),(0,t.jsx)("line",{x1:"18",y1:"12",x2:"22",y2:"12"}),(0,t.jsx)("line",{x1:"4.93",y1:"19.07",x2:"7.76",y2:"16.24"}),(0,t.jsx)("line",{x1:"16.24",y1:"7.76",x2:"19.07",y2:"4.93"})]}),"TrendingDownIcon",0,({className:e})=>(0,t.jsxs)("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,t.jsx)("polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7"}),(0,t.jsx)("polyline",{points:"16 17 22 17 22 11"})]}),"TrendingUpIcon",0,({className:e})=>(0,t.jsxs)("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,t.jsx)("polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17"}),(0,t.jsx)("polyline",{points:"16 7 22 7 22 13"})]})])},18223,e=>{"use strict";let t=new Map;function n(e,a={}){if(window.deduplicatedFetch&&window.deduplicatedFetch!==n)return window.deduplicatedFetch(e,a);let r=function(e,t={}){let n=t.method||"GET",a=t.body?"string"==typeof t.body?t.body:JSON.stringify(t.body):"";return`${n}:${e}:${a}`}(e,a);if(t.has(r))return t.get(r);let s=fetch(e,a).then(e=>(setTimeout(()=>{t.delete(r)},100),e)).catch(e=>{throw t.delete(r),e});return t.set(r,s),s}function a(e,t,...n){if(window.logError)return window.logError(e,t,...n);console.error(e,t,...n)}function r(e,t){if(window.analytics)return window.analytics.track(e,t)}function s(e){if(!e)return"Other";let t=e.toLowerCase();return[/^chief/i,/^c\s*[-.]?\s*level/i,/^c\s*[-.]?\s*suite/i,/president/i,/^ceo/i,/^cto/i,/^cfo/i,/^coo/i,/^cmo/i,/^chro/i,/^chief\s+executive/i,/^chief\s+technology/i,/^chief\s+financial/i,/^chief\s+operating/i,/^chief\s+marketing/i,/^chief\s+human/i].some(e=>e.test(t))?"C-Level":[/^vice\s+president/i,/^vp/i,/^svp/i,/^evp/i,/^senior\s+vice\s+president/i,/^executive\s+vice\s+president/i,/^director/i,/^senior\s+director/i,/^executive\s+director/i,/^head\s+of/i,/^general\s+manager/i,/^gm\b/i].some(e=>e.test(t))?"Sr. Level":"Other"}function l(e){if(!e||"N/A"===e||null==e)return"N/A";if("string"==typeof e&&e.includes("$"))return e;let t="string"==typeof e?parseFloat(e.replace(/[^0-9.-]/g,"")):e;return isNaN(t)?e:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(t)}function i(){return document.documentElement.getAttribute("data-build-version")||document.querySelector('meta[name="build-version"]')?.content||"unknown"}function o(){return"localhost"!==window.location.hostname&&!window.location.hostname.includes("127.0.0.1")}e.s(["categorizeContactLevel",()=>s,"deduplicatedFetch",()=>n,"formatCurrency",()=>l,"getBuildVersion",()=>i,"isProduction",()=>o,"logError",()=>a,"trackAnalytics",()=>r])},70496,e=>{"use strict";var t=e.i(43476),n=e.i(71645),a=e.i(18566),r=e.i(9308),s=e.i(47791),l=e.i(18223);let i=({settings:e,onUpdate:a,saving:r})=>{let[s,l]=(0,n.useState)({});return(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-lean-black mb-6",children:"Performance & Caching Settings"}),(0,t.jsx)("p",{className:"text-lean-black-70 mb-6",children:"Configure cache time-to-live (TTL) values to balance performance and data freshness."}),(0,t.jsx)("div",{className:"space-y-6",children:[{key:"ACCOUNTS",label:"Accounts Cache",unit:"hours",defaultValue:1,description:"How long to cache account data"},{key:"CASES",label:"Cases Cache",unit:"hours",defaultValue:1,description:"How long to cache case data"},{key:"CONTACTS",label:"Contacts Cache",unit:"hours",defaultValue:24,description:"How long to cache contact data"},{key:"TRANSCRIPTIONS",label:"Transcriptions Cache",unit:"hours",defaultValue:24,description:"How long to cache transcription data"},{key:"CALENDAR_EVENTS",label:"Calendar Events Cache",unit:"minutes",defaultValue:15,description:"How long to cache calendar event data"}].map(n=>{var i,o;let c=(i=n.key,o=n.defaultValue,void 0!==s[i]?s[i]:e[i]?.value??o);return(0,t.jsxs)("div",{className:"border border-lean-black/10 rounded-lg p-4",children:[(0,t.jsx)("div",{className:"flex items-start justify-between mb-2",children:(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-lean-black mb-1",children:n.label}),(0,t.jsx)("p",{className:"text-xs text-lean-black-60 mb-3",children:n.description})]})}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("input",{type:"number",min:"0",step:"0.5",value:c,onChange:e=>{var t,a;return t=n.key,a=e.target.value,void l(e=>({...e,[t]:a}))},onBlur:e=>{var t,r,s;let i;return t=n.key,r=e.target.value,s=n.defaultValue,i=parseFloat(r)||s,void(l(e=>{let n={...e};return delete n[t],n}),a("cache",t,i))},onKeyDown:e=>(n.key,n.defaultValue,void("Enter"===e.key&&e.target.blur())),disabled:r,className:"w-32 px-3 py-2 border border-lean-black/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-lean-green focus:border-transparent disabled:opacity-50"}),(0,t.jsx)("span",{className:"text-sm text-lean-black-70",children:n.unit}),e[n.key]?.updated_at&&(0,t.jsxs)("span",{className:"text-xs text-lean-black-60 ml-auto",children:["Last updated: ",new Date(e[n.key].updated_at).toLocaleString()]})]})]},n.key)})})]})},o=({settings:e,onUpdate:a,saving:r})=>{let[s,l]=(0,n.useState)({});return(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-lean-black mb-6",children:"API Limits"}),(0,t.jsx)("p",{className:"text-lean-black-70 mb-6",children:"Configure maximum limits for API requests to control resource usage."}),(0,t.jsx)("div",{className:"space-y-6",children:[{key:"CASES_PER_ACCOUNT",label:"Cases Per Account",defaultValue:25,description:"Maximum number of cases to fetch per account"},{key:"CONTACTS_PER_ACCOUNT",label:"Contacts Per Account",defaultValue:100,description:"Maximum number of contacts to fetch per account"},{key:"ACCOUNTS_PER_USER",label:"Accounts Per User",defaultValue:1e3,description:"Maximum number of accounts per user"}].map(n=>{var i,o;let c=(i=n.key,o=n.defaultValue,void 0!==s[i]?s[i]:e[i]?.value??o);return(0,t.jsxs)("div",{className:"border border-lean-black/10 rounded-lg p-4",children:[(0,t.jsx)("div",{className:"flex items-start justify-between mb-2",children:(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-lean-black mb-1",children:n.label}),(0,t.jsx)("p",{className:"text-xs text-lean-black-60 mb-3",children:n.description})]})}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("input",{type:"number",min:"1",value:c,onChange:e=>{var t,a;return t=n.key,a=e.target.value,void l(e=>({...e,[t]:a}))},onBlur:e=>{var t,r,s;let i;return t=n.key,r=e.target.value,s=n.defaultValue,i=parseInt(r)||s,void(l(e=>{let n={...e};return delete n[t],n}),a("api_limits",t,i))},onKeyDown:e=>(n.key,n.defaultValue,void("Enter"===e.key&&e.target.blur())),disabled:r,className:"w-32 px-3 py-2 border border-lean-black/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-lean-green focus:border-transparent disabled:opacity-50"}),e[n.key]?.updated_at&&(0,t.jsxs)("span",{className:"text-xs text-lean-black-60 ml-auto",children:["Last updated: ",new Date(e[n.key].updated_at).toLocaleString()]})]})]},n.key)})})]})},c=({settings:e,onUpdate:a,saving:r})=>{let[s,l]=(0,n.useState)({});return(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-lean-black mb-6",children:"Rate Limiting"}),(0,t.jsx)("p",{className:"text-lean-black-70 mb-6",children:"Configure rate limiting to prevent API abuse and ensure fair resource usage."}),(0,t.jsx)("div",{className:"space-y-6",children:[{key:"WINDOW_MS",label:"Rate Limit Window",unit:"milliseconds",defaultValue:6e4,description:"Time window for rate limiting (60000 = 1 minute)"},{key:"MAX_REQUESTS",label:"Max Requests Per Window",defaultValue:10,description:"Maximum requests allowed per window per IP address"}].map(n=>{var i,o;let c=(i=n.key,o=n.defaultValue,void 0!==s[i]?s[i]:e[i]?.value??o);return(0,t.jsxs)("div",{className:"border border-lean-black/10 rounded-lg p-4",children:[(0,t.jsx)("div",{className:"flex items-start justify-between mb-2",children:(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-lean-black mb-1",children:n.label}),(0,t.jsx)("p",{className:"text-xs text-lean-black-60 mb-3",children:n.description})]})}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("input",{type:"number",min:"1",value:c,onChange:e=>{var t,a;return t=n.key,a=e.target.value,void l(e=>({...e,[t]:a}))},onBlur:e=>{var t,r,s;let i;return t=n.key,r=e.target.value,s=n.defaultValue,i=parseInt(r)||s,void(l(e=>{let n={...e};return delete n[t],n}),a("rate_limiting",t,i))},onKeyDown:e=>(n.key,n.defaultValue,void("Enter"===e.key&&e.target.blur())),disabled:r,className:"w-32 px-3 py-2 border border-lean-black/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-lean-green focus:border-transparent disabled:opacity-50"}),n.unit&&(0,t.jsx)("span",{className:"text-sm text-lean-black-70",children:n.unit}),e[n.key]?.updated_at&&(0,t.jsxs)("span",{className:"text-xs text-lean-black-60 ml-auto",children:["Last updated: ",new Date(e[n.key].updated_at).toLocaleString()]})]})]},n.key)})})]})},d=({statuses:e,onRefresh:n})=>(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-lean-black",children:"Integration Status"}),(0,t.jsx)("p",{className:"text-lean-black-70 mt-1",children:"Monitor integration health and connection status"})]}),(0,t.jsx)("button",{onClick:n,className:"px-4 py-2 bg-lean-green text-white font-semibold rounded-lg hover:bg-lean-green/90 transition-colors",children:"Refresh Status"})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[{id:"salesforce",name:"Salesforce",description:"Customer relationship management and account data",icon:"ðŸ“Š"},{id:"avoma",name:"Avoma",description:"Meeting transcriptions and recordings",icon:"ðŸŽ¤"},{id:"googleCalendar",name:"Google Calendar",description:"Calendar events and meeting scheduling",icon:"ðŸ“…"}].map(n=>{let a=e[n.id];return(0,t.jsxs)("div",{className:"border border-lean-black/10 rounded-lg p-6",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:"text-2xl",children:n.icon}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-lean-black",children:n.name}),(0,t.jsx)("p",{className:"text-sm text-lean-black-60",children:n.description})]})]}),a?a.error&&(a.error.includes("401")||a.error.includes("Unauthorized")||a.error.includes("Unauthenticated")||a.lastError?.includes("401")||a.lastError?.includes("Unauthorized"))?(0,t.jsx)("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-700 rounded text-xs font-semibold",children:"Auth Error"}):a.connected&&a.configured?(0,t.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded text-xs",children:"Connected"}):a.configured&&!a.connected?(0,t.jsx)("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-700 rounded text-xs",children:"Configured"}):(0,t.jsx)("span",{className:"px-2 py-1 bg-red-100 text-red-700 rounded text-xs",children:"Not Configured"}):(0,t.jsx)("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 rounded text-xs",children:"Unknown"})]}),a?.lastChecked&&(0,t.jsxs)("p",{className:"text-xs text-lean-black-60",children:["Last checked: ",new Date(a.lastChecked).toLocaleString()]}),a?.lastError&&(0,t.jsxs)("div",{className:"mt-2 p-2 bg-red-50 border border-red-200 rounded text-xs",children:[(0,t.jsx)("p",{className:"text-red-700 font-semibold mb-1",children:"Last Error:"}),(0,t.jsx)("p",{className:"text-red-600",children:a.lastError})]}),a?.error&&!a.lastError&&(0,t.jsxs)("div",{className:"mt-2 p-2 bg-yellow-50 border border-yellow-200 rounded text-xs",children:[(0,t.jsx)("p",{className:"text-yellow-700 font-semibold mb-1",children:"Error:"}),(0,t.jsx)("p",{className:"text-yellow-600",children:a.error})]}),a?.configured&&!a?.active&&(0,t.jsx)("p",{className:"text-xs text-yellow-600 mt-2",children:"Configuration exists but is not active"})]},n.id)})})]}),u=({settings:e,onUpdate:a,saving:r})=>{let[s,l]=(0,n.useState)({});return(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-lean-black mb-6",children:"AI/Gemini Settings"}),(0,t.jsx)("p",{className:"text-lean-black-70 mb-6",children:"Configure AI model selection and API settings for sentiment analysis."}),(0,t.jsx)("div",{className:"space-y-6",children:[{key:"GEMINI_MODEL",label:"Gemini Model",type:"text",defaultValue:"auto",description:"Model to use (auto = auto-discover best available model)",options:["auto","gemini-1.5-pro","gemini-1.5-flash","gemini-pro"]},{key:"GEMINI_API_TIMEOUT_MS",label:"API Timeout",type:"number",unit:"milliseconds",defaultValue:45e3,description:"Timeout for Gemini API requests (45000 = 45 seconds)"},{key:"SKIP_MODEL_DISCOVERY",label:"Skip Model Discovery",type:"boolean",defaultValue:!1,description:"Skip auto-discovery and use specified model directly"}].map(n=>{var i,o;let c=(i=n.key,o=n.defaultValue,void 0!==s[i]?s[i]:e[i]?.value??o);return"boolean"===n.type?(0,t.jsx)("div",{className:"border border-lean-black/10 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-lean-black mb-1",children:n.label}),(0,t.jsx)("p",{className:"text-xs text-lean-black-60",children:n.description})]}),(0,t.jsx)("label",{className:"flex items-center cursor-pointer",children:(0,t.jsx)("input",{type:"checkbox",checked:!0===c||"true"===c,onChange:e=>{a("ai",n.key,e.target.checked)},disabled:r,className:"w-4 h-4 text-lean-green rounded border-lean-black/20 focus:ring-lean-green disabled:opacity-50"})})]})},n.key):n.options?(0,t.jsxs)("div",{className:"border border-lean-black/10 rounded-lg p-4",children:[(0,t.jsx)("div",{className:"flex items-start justify-between mb-2",children:(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-lean-black mb-1",children:n.label}),(0,t.jsx)("p",{className:"text-xs text-lean-black-60 mb-3",children:n.description})]})}),(0,t.jsx)("select",{value:c,onChange:e=>{a("ai",n.key,e.target.value)},disabled:r,className:"w-full max-w-md px-3 py-2 border border-lean-black/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-lean-green focus:border-transparent disabled:opacity-50",children:n.options.map(e=>(0,t.jsx)("option",{value:e,children:e},e))})]},n.key):(0,t.jsxs)("div",{className:"border border-lean-black/10 rounded-lg p-4",children:[(0,t.jsx)("div",{className:"flex items-start justify-between mb-2",children:(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-lean-black mb-1",children:n.label}),(0,t.jsx)("p",{className:"text-xs text-lean-black-60 mb-3",children:n.description})]})}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("input",{type:"number",min:"0",value:c,onChange:e=>{var t,a;return t=n.key,a=e.target.value,void l(e=>({...e,[t]:a}))},onBlur:e=>((e,t,n,r)=>{if("number"==typeof r){let e=parseInt(n)||r;l(e=>{let n={...e};return delete n[t],n}),a("ai",t,e)}})(0,n.key,e.target.value,n.defaultValue),onKeyDown:e=>(n.key,n.defaultValue,void("Enter"===e.key&&e.target.blur())),disabled:r,className:"w-32 px-3 py-2 border border-lean-black/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-lean-green focus:border-transparent disabled:opacity-50"}),n.unit&&(0,t.jsx)("span",{className:"text-sm text-lean-black-70",children:n.unit})]})]},n.key)})})]})},m=({settings:e,onUpdate:n,saving:a})=>(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-lean-black mb-6",children:"Feature Flags"}),(0,t.jsx)("p",{className:"text-lean-black-70 mb-6",children:"Enable or disable specific features system-wide."}),(0,t.jsx)("div",{className:"space-y-4",children:[{key:"ENABLE_AVOMA_TRANSCRIPTIONS",label:"Avoma Transcriptions",defaultValue:!0,description:"Enable Avoma transcription integration"},{key:"ENABLE_GOOGLE_CALENDAR",label:"Google Calendar",defaultValue:!0,description:"Enable Google Calendar integration"},{key:"ENABLE_SENTIMENT_ANALYSIS",label:"Sentiment Analysis",defaultValue:!0,description:"Enable sentiment analysis feature"}].map(r=>{let s=e[r.key]?.value??r.defaultValue,l=!0===s||"true"===s;return(0,t.jsx)("div",{className:"border border-lean-black/10 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-lean-black mb-1",children:r.label}),(0,t.jsx)("p",{className:"text-xs text-lean-black-60",children:r.description})]}),(0,t.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",checked:l,onChange:e=>{n("features",r.key,e.target.checked)},disabled:a,className:"w-4 h-4 text-lean-green rounded border-lean-black/20 focus:ring-lean-green disabled:opacity-50"}),(0,t.jsx)("span",{className:"ml-2 text-sm text-lean-black-70",children:l?"Enabled":"Disabled"})]})]})},r.key)})})]}),f=()=>{let[e,a]=(0,n.useState)({environment:"production",nodeVersion:"",timestamp:new Date().toISOString()});return(0,n.useEffect)(()=>{let e=window.location.hostname,t=e.includes("localhost")?"development":e.includes("vercel.app")?"staging":"production";a(e=>({...e,environment:t,timestamp:new Date().toISOString()}))},[]),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-lean-black mb-6",children:"System Information"}),(0,t.jsx)("p",{className:"text-lean-black-70 mb-6",children:"View system environment and deployment information."}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"border border-lean-black/10 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm font-semibold text-lean-black",children:"Environment"}),(0,t.jsx)("span",{className:"text-sm text-lean-black-70 capitalize",children:e.environment})]})}),(0,t.jsx)("div",{className:"border border-lean-black/10 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm font-semibold text-lean-black",children:"Hostname"}),(0,t.jsx)("span",{className:"text-sm text-lean-black-70",children:window.location.hostname})]})}),(0,t.jsx)("div",{className:"border border-lean-black/10 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm font-semibold text-lean-black",children:"Current Time"}),(0,t.jsx)("span",{className:"text-sm text-lean-black-70",children:new Date().toLocaleString()})]})}),(0,t.jsx)("div",{className:"border border-lean-black/10 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm font-semibold text-lean-black",children:"User Agent"}),(0,t.jsxs)("span",{className:"text-sm text-lean-black-70 truncate max-w-md",title:navigator.userAgent,children:[navigator.userAgent.substring(0,50),"..."]})]})})]})]})},x=({user:e,onRefresh:a})=>{let[r,i]=(0,n.useState)({}),[o,c]=(0,n.useState)(!0),[d,u]=(0,n.useState)({}),[m,f]=(0,n.useState)({}),[x,p]=(0,n.useState)({}),[b,h]=(0,n.useState)({}),g=[{id:"avoma",name:"Avoma",description:"Meeting transcriptions and recordings",icon:"ðŸŽ¤",fields:[{key:"api_key",label:"API Key",type:"password",required:!0},{key:"api_url",label:"API URL",type:"text",required:!1,defaultValue:"https://api.avoma.com/v1"}]},{id:"salesforce",name:"Salesforce",description:"Customer relationship management and account data",icon:"ðŸ“Š",fields:[{key:"username",label:"Username",type:"text",required:!0},{key:"password",label:"Password",type:"password",required:!0},{key:"security_token",label:"Security Token",type:"password",required:!1},{key:"login_url",label:"Login URL",type:"text",required:!1,defaultValue:"https://login.salesforce.com"}]}],y=(0,n.useCallback)(async()=>{try{c(!0),p({});let e=await fetch("/api/system-settings?integrationConfigs=true");if(!e.ok)throw Error("Failed to fetch integration configs");let t=await e.json();i(t.configs||{})}catch(e){(0,l.logError)("Error fetching integration configs:",e),p({general:e.message||"Failed to load integration configs"})}finally{c(!1)}},[]);(0,n.useEffect)(()=>{y()},[y]);let v=async t=>{try{u(e=>({...e,[t]:!0})),p(e=>{let n={...e};return delete n[t],n});let n=g.find(e=>e.id===t),s={id:r[t]?.id},l=!1;if(n.fields.forEach(e=>{let n=b[`${t}_${e.key}`];void 0!==n&&""!==n?(s[e.key]=n,l=!0):r[t]||void 0===e.defaultValue||(s[e.key]=e.defaultValue,l=!0)}),!l&&r[t])return void u(e=>({...e,[t]:!1}));let i=await fetch("/api/system-settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"updateIntegrationConfig",type:t,config:s,userId:e?.id})});if(!i.ok){let e=await i.json().catch(()=>({}));throw Error(e.message||e.error||"Failed to save configuration")}let o={...b};n.fields.forEach(e=>{delete o[`${t}_${e.key}`]}),h(o),await y(),a&&a();let c=document.createElement("div");c.className="fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50",c.textContent=`${n.name} configuration saved successfully!`,document.body.appendChild(c),setTimeout(()=>{document.body.removeChild(c)},3e3)}catch(e){(0,l.logError)(`Error saving ${t} config:`,e),p(n=>({...n,[t]:e.message||"Failed to save configuration"}))}finally{u(e=>({...e,[t]:!1}))}},j=async t=>{try{f(e=>({...e,[t]:!0})),p(e=>{let n={...e};return delete n[`${t}_test`],n});let n=await fetch("/api/system-settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"testIntegration",type:t,userId:e?.id})});if(!n.ok){let e=await n.json().catch(()=>({}));throw Error(e.message||e.error||"Connection test failed")}let r=await n.json();await y(),a&&a();let s=document.createElement("div");s.className="fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50",s.textContent=r.message||"Connection test successful!",document.body.appendChild(s),setTimeout(()=>{document.body.removeChild(s)},3e3)}catch(e){(0,l.logError)(`Error testing ${t} connection:`,e),p(n=>({...n,[`${t}_test`]:e.message||"Connection test failed"}))}finally{f(e=>({...e,[t]:!1}))}};return o?(0,t.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,t.jsx)(s.LoaderIcon,{className:"w-8 h-8 animate-spin text-lean-green mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-lean-black-70",children:"Loading integration configurations..."})]}):(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-lean-black",children:"Integration Configuration"}),(0,t.jsx)("p",{className:"text-lean-black-70 mt-1",children:"Manage API keys and configuration settings for each integration"})]}),x.general&&(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:(0,t.jsx)("p",{className:"text-sm text-red-700",children:x.general})}),(0,t.jsx)("div",{className:"space-y-6",children:g.map(e=>{let n=r[e.id],a=!!n,s=d[e.id],l=m[e.id],i=x[e.id],o=x[`${e.id}_test`],c=!0===e.disabled;return(0,t.jsxs)("div",{className:`border border-lean-black/10 rounded-lg p-6 ${c?"opacity-60":""}`,children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:"text-2xl",children:e.icon}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-lean-black",children:e.name}),(0,t.jsx)("p",{className:"text-sm text-lean-black-60",children:e.description})]})]}),(0,t.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[c&&(0,t.jsx)("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 rounded text-xs",children:"Disabled"}),!c&&a&&(0,t.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded text-xs",children:"Configured"})]})]}),c&&e.disabledReason&&(0,t.jsxs)("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded text-sm",children:[(0,t.jsx)("p",{className:"text-yellow-800 font-semibold mb-1",children:"âš ï¸ Limited Functionality"}),(0,t.jsx)("p",{className:"text-yellow-700",children:e.disabledReason})]}),i&&(0,t.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded text-sm text-red-700",children:i}),o&&(0,t.jsxs)("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded text-sm text-yellow-700",children:[(0,t.jsx)("strong",{children:"Test Error:"})," ",o]}),(0,t.jsx)("div",{className:`space-y-4 ${c?"pointer-events-none":""}`,children:e.fields.map(l=>{let i=((e,t,n="")=>{let a=`${e}_${t}`;if(void 0!==b[a])return b[a];let s=r[e];return s?s[`${t}_masked`]?"":s[t]||n:n})(e.id,l.key,l.defaultValue||""),o=x[`${e.id}_${l.key}`],c=n&&n[`${l.key}_masked`]&&!b[`${e.id}_${l.key}`];return(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-semibold text-lean-black mb-1",children:[l.label,l.required&&(0,t.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,t.jsx)("input",{type:"password"===l.type?"password":"text",value:i,onChange:t=>{var n,a,r;let s,i;return n=e.id,a=l.key,r=t.target.value,s=`${n}_${a}`,h(e=>({...e,[s]:r})),void(x[i=`${n}_${a}`]&&p(e=>{let t={...e};return delete t[i],t}))},placeholder:c?"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢ (configured)":l.defaultValue||`Enter ${l.label.toLowerCase()}`,disabled:s,className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-lean-green focus:border-transparent disabled:opacity-50 ${o?"border-red-300":"border-lean-black/20"}`}),o&&(0,t.jsx)("p",{className:"mt-1 text-xs text-red-600",children:o}),l.defaultValue&&!a&&(0,t.jsxs)("p",{className:"mt-1 text-xs text-lean-black-60",children:["Default: ",l.defaultValue]})]},l.key)})}),(0,t.jsxs)("div",{className:"flex items-center gap-3 mt-6 pt-4 border-t border-lean-black/10",children:[(0,t.jsx)("button",{onClick:()=>v(e.id),disabled:s||l||c,className:"px-4 py-2 bg-lean-green text-white font-semibold rounded-lg hover:bg-lean-green/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:s?"Saving...":"Save Configuration"}),a&&!c&&(0,t.jsx)("button",{onClick:()=>j(e.id),disabled:s||l,className:"px-4 py-2 bg-blue-500 text-white font-semibold rounded-lg hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:l?"Testing...":"Test Connection"}),n?.last_tested&&(0,t.jsxs)("span",{className:"text-xs text-lean-black-60 ml-auto",children:["Last tested: ",new Date(n.last_tested).toLocaleString()]})]})]},e.id)})})]})};e.s(["default",0,({user:e,onSignOut:p})=>{let b=(0,a.useRouter)(),[h,g]=(0,n.useState)({}),[y,v]=(0,n.useState)(!0),[j,N]=(0,n.useState)(null),[k,w]=(0,n.useState)(!1),[C,S]=(0,n.useState)({}),[E,_]=(0,n.useState)("cache"),P=(0,n.useCallback)(async()=>{try{v(!0),N(null);let e=await fetch("/api/system-settings");if(!e.ok)throw Error("Failed to fetch system settings");let t=await e.json();g(t.settings||{})}catch(e){(0,l.logError)("Error fetching system settings:",e),N(e.message||"Failed to load system settings. Please refresh the page.")}finally{v(!1)}},[]),A=(0,n.useCallback)(async()=>{try{let t=new URLSearchParams;t.append("integrationStatus","true"),e?.id&&t.append("userId",e.id);let n=await fetch(`/api/system-settings?${t}`);if(!n.ok)throw Error("Failed to fetch integration statuses");let a=(await n.json()).statuses||{},r={};a.salesforce&&(r.salesforce={connected:a.salesforce.configured&&a.salesforce.active&&!a.salesforce.lastError,configured:a.salesforce.configured,active:a.salesforce.active,lastChecked:a.salesforce.lastTested||new Date().toISOString(),lastError:a.salesforce.lastError||null,error:a.salesforce.error||null}),a.avoma&&(r.avoma={connected:a.avoma.configured&&a.avoma.active&&!a.avoma.lastError,configured:a.avoma.configured,active:a.avoma.active,lastChecked:a.avoma.lastTested||new Date().toISOString(),lastError:a.avoma.lastError||null,error:a.avoma.error||null}),a.googleCalendar&&(r.googleCalendar={connected:!0===a.googleCalendar.connected,configured:a.googleCalendar.configured,lastChecked:a.googleCalendar.lastChecked||new Date().toISOString(),error:a.googleCalendar.error}),S(r)}catch(e){(0,l.logError)("Error fetching integration statuses:",e),S({salesforce:{connected:!1,error:"Failed to check status"},avoma:{connected:!1,error:"Failed to check status"},googleCalendar:{connected:!1,error:"Failed to check status"}})}},[e]);(0,n.useEffect)(()=>{P(),A()},[P,A]);let I=(0,n.useCallback)(async(t,n,a)=>{try{w(!0),N(null);let r=await fetch("/api/system-settings",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({category:t,settingKey:n,value:a,userId:e?.id})});if(!r.ok){let e=await r.json().catch(()=>({}));throw Error(e.message||e.error||"Failed to update setting")}g(e=>({...e,[t]:{...e[t],[n]:{...e[t]?.[n],value:a,updated_at:new Date().toISOString()}}}));let s=document.createElement("div");s.className="fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50",s.textContent="Setting updated successfully!",document.body.appendChild(s),setTimeout(()=>{document.body.removeChild(s)},2e3)}catch(e){(0,l.logError)("Error updating setting:",e),N(e.message||"Failed to update setting. Please try again.")}finally{w(!1)}},[e]);return y?(0,t.jsx)("div",{className:"min-h-screen bg-lean-almost-white flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(s.LoaderIcon,{className:"w-8 h-8 animate-spin text-lean-green mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-lean-black-70",children:"Loading system settings..."})]})}):(0,t.jsxs)("div",{className:"min-h-screen bg-lean-almost-white flex flex-col",children:[(0,t.jsx)(r.default,{user:e,onSignOut:p}),(0,t.jsx)("main",{className:"flex-1 px-4 sm:px-6 lg:px-8 py-8",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("h1",{className:"typography-heading text-lean-black",children:"System Settings"}),(0,t.jsx)("button",{onClick:()=>{b.push("/admin")},className:"px-4 py-2 text-lean-black-70 hover:text-lean-black transition-colors",children:"â† Back to Admin"})]}),(0,t.jsx)("p",{className:"text-sm text-lean-black-70",children:"Configure system-wide settings and preferences"})]}),j&&(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:(0,t.jsx)("p",{className:"text-sm text-red-700",children:j})}),(0,t.jsx)("div",{className:"bg-lean-white rounded-lg shadow-lg mb-6 overflow-hidden",children:(0,t.jsx)("div",{className:"border-b border-lean-black/10",children:(0,t.jsx)("nav",{className:"flex overflow-x-auto",children:[{id:"cache",label:"Performance & Caching",icon:"âš¡"},{id:"api_limits",label:"API Limits",icon:"ðŸ“Š"},{id:"rate_limiting",label:"Rate Limiting",icon:"ðŸš¦"},{id:"integrations",label:"Integrations",icon:"ðŸ”Œ"},{id:"integration_configs",label:"Integration Configs",icon:"ðŸ”‘"},{id:"ai",label:"AI Settings",icon:"ðŸ¤–"},{id:"features",label:"Feature Flags",icon:"ðŸŽ›ï¸"},{id:"system",label:"System Info",icon:"â„¹ï¸"}].map(e=>(0,t.jsxs)("button",{onClick:()=>_(e.id),className:`px-6 py-4 text-sm font-medium transition-colors whitespace-nowrap ${E===e.id?"text-lean-green border-b-2 border-lean-green bg-lean-green/5":"text-lean-black-70 hover:text-lean-black hover:bg-lean-almost-white"}`,children:[(0,t.jsx)("span",{className:"mr-2",children:e.icon}),e.label]},e.id))})})}),(0,t.jsxs)("div",{className:"bg-lean-white rounded-lg shadow-lg p-6",children:["cache"===E&&(0,t.jsx)(i,{settings:h.cache||{},onUpdate:I,saving:k}),"api_limits"===E&&(0,t.jsx)(o,{settings:h.api_limits||{},onUpdate:I,saving:k}),"rate_limiting"===E&&(0,t.jsx)(c,{settings:h.rate_limiting||{},onUpdate:I,saving:k}),"integrations"===E&&(0,t.jsx)(d,{statuses:C,onRefresh:A}),"integration_configs"===E&&(0,t.jsx)(x,{user:e,onRefresh:A}),"ai"===E&&(0,t.jsx)(u,{settings:h.ai||{},onUpdate:I,saving:k}),"features"===E&&(0,t.jsx)(m,{settings:h.features||{},onUpdate:I,saving:k}),"system"===E&&(0,t.jsx)(f,{})]})]})})]})}])},23558,e=>{e.n(e.i(70496))}]);