(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,r)=>{t.exports=e.r(76562)},67585,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"BailoutToCSR",{enumerable:!0,get:function(){return l}});let n=e.r(32061);function l({reason:e,children:t}){if("undefined"==typeof window)throw Object.defineProperty(new n.BailoutToCSRError(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return t}},9885,(e,t,r)=>{"use strict";function n(e){return e.split("/").map(e=>encodeURIComponent(e)).join("/")}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"encodeURIPath",{enumerable:!0,get:function(){return n}})},52157,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"PreloadChunks",{enumerable:!0,get:function(){return a}});let n=e.r(43476),l=e.r(74080),o=e.r(63599),s=e.r(9885);function a({moduleIds:e}){if("undefined"!=typeof window)return null;let t=o.workAsyncStorage.getStore();if(void 0===t)return null;let r=[];if(t.reactLoadableManifest&&e){let n=t.reactLoadableManifest;for(let t of e){if(!n[t])continue;let e=n[t].files;r.push(...e)}}return 0===r.length?null:(0,n.jsx)(n.Fragment,{children:r.map(e=>{let r=`${t.assetPrefix}/_next/${(0,s.encodeURIPath)(e)}`;return e.endsWith(".css")?(0,n.jsx)("link",{precedence:"dynamic",href:r,rel:"stylesheet",as:"style",nonce:t.nonce},e):((0,l.preload)(r,{as:"script",fetchPriority:"low",nonce:t.nonce}),null)})})}},69093,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"default",{enumerable:!0,get:function(){return u}});let n=e.r(43476),l=e.r(71645),o=e.r(67585),s=e.r(52157);function a(e){return{default:e&&"default"in e?e.default:e}}let i={loader:()=>Promise.resolve(a(()=>null)),loading:null,ssr:!0},u=function(e){let t={...i,...e},r=(0,l.lazy)(()=>t.loader().then(a)),u=t.loading;function d(e){let a=u?(0,n.jsx)(u,{isLoading:!0,pastDelay:!0,error:null}):null,i=!t.ssr||!!t.loading,d=i?l.Suspense:l.Fragment,c=t.ssr?(0,n.jsxs)(n.Fragment,{children:["undefined"==typeof window?(0,n.jsx)(s.PreloadChunks,{moduleIds:t.modules}):null,(0,n.jsx)(r,{...e})]}):(0,n.jsx)(o.BailoutToCSR,{reason:"next/dynamic",children:(0,n.jsx)(r,{...e})});return(0,n.jsx)(d,{...i?{fallback:a}:{},children:c})}return d.displayName="LoadableComponent",d}},70703,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"default",{enumerable:!0,get:function(){return l}});let n=e.r(55682)._(e.r(69093));function l(e,t){let r={};"function"==typeof e&&(r.loader=e);let l={...r,...t};return(0,n.default)({...l,modules:l.loadableGenerated?.modules})}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},37833,e=>{"use strict";var t=e.i(71645),r=e.i(18566);function n(){(0,r.useRouter)();let[e,n]=(0,t.useState)(null),[l,o]=(0,t.useState)(!0);return(0,t.useEffect)(()=>{let e=localStorage.getItem("userInfo");if(e)try{let t=JSON.parse(e);n(t),t&&t.id&&(!t.roles||0===t.roles.length)&&fetch(`/api/users?id=${t.id}`).then(e=>e.json()).then(e=>{if(e.roles){let r={...t,roles:e.roles};localStorage.setItem("userInfo",JSON.stringify(r)),n(r)}}).catch(e=>console.error("Error refreshing user roles:",e))}catch(e){console.error("Error parsing saved user info:",e),localStorage.removeItem("userInfo")}o(!1)},[]),(0,t.useEffect)(()=>{let t=async()=>{if(e&&e.id)try{let t=await fetch(`/api/users?id=${e.id}`);if(t.ok){let r=await t.json();if(r.roles){let t={...e,roles:r.roles};localStorage.setItem("userInfo",JSON.stringify(t)),n(t)}}}catch(e){console.error("Error refreshing user roles:",e)}};e&&e.id&&t()},[]),{user:e,loading:l,handleSignIn:async e=>{try{let t=await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.email,name:e.name,picture:e.picture,sub:e.sub})});if(t.ok){let e=await t.json();localStorage.setItem("userInfo",JSON.stringify(e)),n(e),window.analytics&&window.analytics.track("user_signed_in",{email:e.email,userId:e.id})}else localStorage.setItem("userInfo",JSON.stringify(e)),n(e),window.analytics&&window.analytics.track("user_signed_in",{email:e.email})}catch(t){console.error("Error creating user:",t),localStorage.setItem("userInfo",JSON.stringify(e)),n(e),window.analytics&&window.analytics.track("user_signed_in",{email:e.email})}},handleSignOut:()=>{localStorage.removeItem("userInfo"),n(null),window.google?.accounts?.id&&window.google.accounts.id.disableAutoSelect(),window.analytics&&window.analytics.track("user_signed_out"),window.location.href="/"},hasAdminRole:(t=e)=>!!t&&!!t.roles&&t.roles.some(e=>e.name&&"admin"===e.name.toLowerCase())}}e.s(["useAuth",()=>n])},22547,e=>{"use strict";var t=e.i(43476),r=e.i(71645),n=e.i(18566),l=e.i(70703),o=e.i(37833);let s=(0,l.default)(()=>e.A(19257),{loadableGenerated:{modules:[42945]},ssr:!1});function a(){let e=(0,n.useRouter)(),{user:l,loading:a,handleSignOut:i,hasAdminRole:u}=(0,o.useAuth)();return((0,r.useEffect)(()=>{if(!a){if(!l)return void e.push("/login");if(!u())return void e.push("/")}window.analytics&&window.analytics.pageView("/admin")},[l,a,u,e]),a)?(0,t.jsx)("div",{className:"flex justify-center items-center min-h-screen bg-lean-almost-white",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-lean-green"})}):l&&u()?(0,t.jsx)(s,{user:l,onSignOut:i}):(0,t.jsx)("div",{className:"min-h-screen bg-lean-almost-white flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center bg-lean-white rounded-lg shadow-lg p-8 max-w-md",children:[(0,t.jsx)("h1",{className:"typography-heading text-lean-black mb-4",children:"Access Denied"}),(0,t.jsx)("p",{className:"text-lean-black-70 mb-6",children:"You need administrator privileges to access this page."}),(0,t.jsx)("button",{onClick:()=>e.push("/"),className:"px-4 py-2 bg-lean-green text-lean-white font-semibold rounded-lg hover:bg-lean-green/90 transition-colors",children:"Back to Dashboard"})]})})}e.s(["default",()=>a])},19257,e=>{e.v(t=>Promise.all(["static/chunks/59aafdae433aa05a.js"].map(t=>e.l(t))).then(()=>t(42945)))}]);